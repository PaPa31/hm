<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://papa31.github.io/hm/blog</id>
    <title>Feed</title>
    <updated>2022-05-01T17:35:28.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://papa31.github.io/hm/blog"/>
    <subtitle>Feed</subtitle>
    <icon>https://papa31.github.io/hm/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Install MongoDB on Windows]]></title>
        <id>/2022/05/01/install-mongodb-on-windows</id>
        <link href="https://papa31.github.io/hm/blog/2022/05/01/install-mongodb-on-windows"/>
        <updated>2022-05-01T17:35:28.000Z</updated>
        <summary type="html"><![CDATA[Installation MongoDB and mongosh on Windows]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install-mongodb">Install MongoDB<a class="hash-link" href="#install-mongodb" title="Direct link to heading">​</a></h3><ol><li><p>Download the <em>.msi</em> installer: <a href="https://www.mongodb.com/try/download/community?tck=docs_server" target="_blank" rel="noopener noreferrer" class="external">mongodb.com: Community Edition</a></p></li><li><p>Start the wizard by double-clicking the <em>.msi</em> file</p></li><li><p>In wizard:<br>
<!-- -->a. Change location to <em>F:\Program Files\MongoDB\Server\5.0\bin</em><br>
<!-- -->b. Uncheck the <em>Install MongoDB as a Service</em><br>
<!-- -->c. Uncheck the <em>Install MongoDB Compass</em><br>
<!-- -->d. Click Install</p></li><li><p>Add <em>C:\Program Files\MongoDB\Server\5.0\bin</em> to your <a href="/hm/docs/workplace/windows/set-environment-variable-windows">PATH environment variable</a></p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install-mongosh">Install mongosh<a class="hash-link" href="#install-mongosh" title="Direct link to heading">​</a></h3><ol><li>Download and run the MongoDB Shell <em>.msi</em> installer: <a href="https://www.mongodb.com/try/download/shell?jmp=docs" target="_blank" rel="noopener noreferrer" class="external">mongodb.com: Shell</a></li><li>Accept location: <em>F:\Users\parsh\AppData\Local\Programs\mongosh</em></li><li>Add the mongosh binary (F:\Users\parsh\AppData\Local\Programs\mongosh<!-- -->)<!-- --> to your <a href="/hm/docs/workplace/windows/set-environment-variable-windows">PATH environment variable</a></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="run-mongodb">Run MongoDB<a class="hash-link" href="#run-mongodb" title="Direct link to heading">​</a></h3><ol><li><p>Run <em>cmd</em> as admin and create the data directory:</p><div class="language-cmd codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">cmd</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmd codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">c:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">md "\data\db"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Start MongoDB database:</p><div class="language-cmd codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">cmd</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmd codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">"F:\Program Files\MongoDB\Server\5.0\bin\mongod.exe" --dbpath="c:\data\db"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or simply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mongod --dbpath="c:\data\db"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Connect to MongoDB:</p><div class="language-cmd codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">cmd</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmd codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongosh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After running this command, you should see information about your MongoDB shell, the local server connection, and some additional information printed to the terminal.</p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="source">Source<a class="hash-link" href="#source" title="Direct link to heading">​</a></h3><ul><li><a href="https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-windows/" target="_blank" rel="noopener noreferrer" class="external">mongodb.com: Install Mongodb On Windows</a></li></ul>]]></content>
        <author>
            <name>papa31</name>
            <uri>https://github.com/papa31</uri>
        </author>
        <category label="database" term="database"/>
        <category label="mongodb" term="mongodb"/>
        <category label="mongosh" term="mongosh"/>
        <category label="windows" term="windows"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[CI evolution: From FTP client to GitHub Action]]></title>
        <id>/2021/11/13/from-ftp-client-to-github-action</id>
        <link href="https://papa31.github.io/hm/blog/2021/11/13/from-ftp-client-to-github-action"/>
        <updated>2021-11-13T13:22:39.000Z</updated>
        <summary type="html"><![CDATA[I started with the FTP client built into Dreamweaver.]]></summary>
        <content type="html"><![CDATA[<p>I started with the <code>FTP client</code> built into <code>Dreamweaver</code>.</p><p>Then I switched from Dreamweaver to <code>VS-Code</code> and started looking for a tool to sync local and remote servers.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sftp-extension"><code>SFTP</code> extension<a class="hash-link" href="#sftp-extension" title="Direct link to heading">​</a></h2><p>At first, such a tool was the liximono <code>SFTP</code> extension (I even made a small contribution to get around the annoying <a href="/hm/blog/2021/11/06/fix-bug-in-vscode-extension">upload bug</a>. But it works manually, and I kept looking.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="git-ftp-shell-program"><code>git-ftp</code> shell program<a class="hash-link" href="#git-ftp-shell-program" title="Direct link to heading">​</a></h2><p>I couple of days ago I stumbled upon (while GitHub searching) the <a href="https://github.com/git-ftp/git-ftp" target="_blank" rel="noopener noreferrer" class="external">github.com: git-ftp</a> shell program from SamKirkland. This program checks the difference (git diff) between local and remote content and uploads new files automatically.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ftp-deploy-action">FTP Deploy Action<a class="hash-link" href="#ftp-deploy-action" title="Direct link to heading">​</a></h2><p>Then I found that Sam had already made the GitHub Action script <a href="https://github.com/marketplace/actions/ftp-deploy?version=3.1.1" target="_blank" rel="noopener noreferrer" class="external">github.com: FTP-Deploy</a>, I configured it and started using it.</p>]]></content>
        <author>
            <name>papa31</name>
            <uri>https://github.com/papa31</uri>
        </author>
        <category label="ftp" term="ftp"/>
        <category label="sftp" term="sftp"/>
        <category label="GitHub Action" term="GitHub Action"/>
        <category label="ftp deploy" term="ftp deploy"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[VS Code: Fix Bug in Any Extension by Rebuilding It]]></title>
        <id>/2021/11/06/fix-bug-in-vscode-extension</id>
        <link href="https://papa31.github.io/hm/blog/2021/11/06/fix-bug-in-vscode-extension"/>
        <updated>2021-11-06T20:51:21.000Z</updated>
        <summary type="html"><![CDATA[How to fix a bug in any VS Code extension (.vsix) by rebuilding that extension]]></summary>
        <content type="html"><![CDATA[<p>In this article, I show you how to rebuild a <code>VS-Code extension</code> using the <code>SFTP</code> extension as an example.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sftp-extension"><code>SFTP</code> extension<a class="hash-link" href="#sftp-extension" title="Direct link to heading">​</a></h2><p>Let's say you are using a nice extension, but you want to add some functionality or fix a bug.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><code>SFTP</code> extension syncs your local directory with a remote server directory, but it has an annoying bug - the <code>Upload Changed FIles</code> command does not work.</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="workaround-upload-changed-files-bug">Workaround <code>Upload Changed Files</code> Bug<a class="hash-link" href="#workaround-upload-changed-files-bug" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-clone-or-fork-of-an-extension-repo">1. Clone or fork of an extension repo<a class="hash-link" href="#1-clone-or-fork-of-an-extension-repo" title="Direct link to heading">​</a></h3><p>Clone or fork this repo (this is a fork of the wandway repo (and this is a fork of the liximomo repo)): <a href="https://github.com/soul-core/vscode-sftp" target="_blank" rel="noopener noreferrer" class="external">github.com: vscode-sftp</a>.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Use any terminal (I used PowerShell or Git-Bash on Windows; and Konsole on MX Linux).</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-install-latest-stable-node">2. Install latest stable node<a class="hash-link" href="#2-install-latest-stable-node" title="Direct link to heading">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Skip this step if you have installed the last stable version of node.</p></div></div><p>Open the folder where you cloned the <code>vscode-sftp</code> extension and, on Windows (make sure you install the <a href="/hm/blog/2021/09/19/nvs-one-node-version-per-terminal-in-windows">nvs</a> - equivalent to <a class="external" href="/hm/docs/node/nvm-per-project-folder">nvm</a>), run:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nvs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see a menu with node versions. Select the node version: 17.0.1 (if you do not see this node version, choose <code>Download another version</code> menu item and install it).</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>On Linux, you can work with any of a node version older than 10. Just use <a href="/hm/docs/node/nvm-per-project-folder">nvm</a>.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-install-extension-dependencies">3. Install extension dependencies<a class="hash-link" href="#3-install-extension-dependencies" title="Direct link to heading">​</a></h3><p>After installing the required node version, run the command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> npm i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command should install all the extension dependencies.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>If you are using <code>npm</code> and you get this error:</p><p><img loading="lazy" alt="npm with yarn.lock error" src="/hm/assets/images/npm-with-yarn-lock-error-b58fb07fb96b21c5f75e3ead8c079a92.png" width="835" height="291" class="img_ev3q"></p><p>Try removing the <code>yarn.lock</code> file from the root folder and running <code>npm i</code> command again.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Everytime you rerun the <code>npm i</code> command, you must delete <code>node_modules</code> folder and <code>package-lock.json</code> file.</p></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you can't rebuild an extension on Windows, try doing the same on Linux (you can rebuild an extension on Linux and use it later on Windows). In my case, it was so. Until I installed the latest stable version of node using <a href="/hm/blog/2021/09/19/nvs-one-node-version-per-terminal-in-windows">nvs</a> on my Windows machine.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-fix-sftp-extension-bug">4. Fix <code>SFTP</code> extension bug<a class="hash-link" href="#4-fix-sftp-extension-bug" title="Direct link to heading">​</a></h3><p>Let's make <code>Upload changed files</code> command visible.</p><p>Open <code>VS-Code</code> editor from terminal from extention root folder with command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">code .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Locate the <code>package.lock</code> file in the extension root folder, open it in <code>VS Code</code> editor and find these two lines:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"command"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sftp.upload.changedFiles"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"when"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"false"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Replace the last line above with the last line below:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"command"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sftp.upload.changedFiles"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"when"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sftp.enabled"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-add-sftp-extension-functionality">5. Add <code>SFTP</code> extension functionality<a class="hash-link" href="#5-add-sftp-extension-functionality" title="Direct link to heading">​</a></h3><p>Let's add keyboard shortcut to the <code>Upload changed files</code> command.</p><p>Add this highlighted block before the <code>jsonValidation</code> line (or wherever it is correct) in the <code>package.lock</code> file:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    "keybindings": [</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        "command": "sftp.upload.changedFiles",</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        "key": "ctrl+alt+u",</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        "when": "sftp.enabled"</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "jsonValidation": [</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Save the <code>package.lock</code> file.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6-avoiding-compiler-error">6. Avoiding compiler error<a class="hash-link" href="#6-avoiding-compiler-error" title="Direct link to heading">​</a></h3><p>When compiling an extension, you may receive a <code>Can't resolve 'minimal'</code> error. To avoid this error, replace this line in the <code>./.vscode/tasks.json</code> file:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">23</span><span class="token plain">  </span><span class="token property" style="color:#36acaa">"args"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"run"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dev"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"--"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"--display"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"minimal"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>with:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">23</span><span class="token plain">  </span><span class="token property" style="color:#36acaa">"args"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"run"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dev"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7-launch-the-extension-in-dev-mode">7. Launch the extension in dev mode<a class="hash-link" href="#7-launch-the-extension-in-dev-mode" title="Direct link to heading">​</a></h3><p>Press <code>F5</code> in VS Code (let's call that VS-Code window - parent window). This will compile and run the extension in a new <code>Extension Development Host</code> window.</p><p><img loading="lazy" alt="Host and Parent windows" src="/hm/assets/images/host-and-parent-windows-c2fbd3022c889fe8fbe8581d2716b8ac.png" width="1249" height="851" class="img_ev3q"></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Make sure you uninstall the installed instance of the <code>sftp</code> extension, otherwise you will run two copies of this extension and cause a conflict.</p></div></div><p>Wait for сompilation to stop.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>To verify that the compilation was successful, run the command <code>Tasks: Show Running Tasks</code> in the Command Palette (Ctrl+Shift+P) in the parent VS-Code window.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="8-open-your-project-to-test-uploading">8. Open your project to test uploading<a class="hash-link" href="#8-open-your-project-to-test-uploading" title="Direct link to heading">​</a></h3><p>In the <code>Extension Development Host</code> window that opens, open the folder with your local project (via the <code>File</code> menu), which you want to connect to the remote server:</p><p><img loading="lazy" alt="File Menu in new Extension Development Host window" src="/hm/assets/images/extension-development-host-window-open-folder-b8346f2237e6a78fb3be07b71746939b.png" width="1024" height="768" class="img_ev3q"></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>If you have opened this project folder in another VS-Code window, close it and try to open it again from the <code>Extension Development Host</code> window.</p></div></div><p>If you already have the <code>sftp.json</code> config file, you should see the <code>sftp</code> extension icon in the Activity bar:</p><p><img loading="lazy" alt="icon-vscode-sftp-extension" src="/hm/assets/images/icon-vscode-sftp-extension-7f93559ffcb4fc2b3992ea7750d0ae24.png" width="1024" height="768" class="img_ev3q"></p><p>And then you can skip the next two steps.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="9-create-sftp-config-file">9. Create <code>sftp</code> config file<a class="hash-link" href="#9-create-sftp-config-file" title="Direct link to heading">​</a></h3><p>If you don't have an <code>sftp.json</code> config file, press <code>F1</code> or <code>Ctrl+Shift+P</code> to open Command Palette and enter the command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SFTP: Config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you see this command listed, run it.</p><p>After running the <code>SFTP: Config</code> command, a new <code>sftp.json</code> config file will be created and you should see its initial content:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">sftp.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"My Server"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"host"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"localhost"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"protocol"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sftp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"port"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"username"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"username"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"remotePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"uploadOnSave"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At the same time, you should see the <code>sftp</code> extension icon in the Activity bar:</p><p><img loading="lazy" alt="icon-vscode-sftp-extension" src="/hm/assets/images/icon-vscode-sftp-extension-7f93559ffcb4fc2b3992ea7750d0ae24.png" width="1024" height="768" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="10-setup-your-sftp-connection">10. Setup your sftp connection<a class="hash-link" href="#10-setup-your-sftp-connection" title="Direct link to heading">​</a></h3><p>Populate the <code>sftp.json</code> using your host credentials as so:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">sftp.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"does-not-matter"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// any name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"host"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-host.com"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the name of your remote host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"protocol"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sftp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"port"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"username"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-username"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// login</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"remotePath"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/home/my-username/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// root your remote host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"uploadOnSave"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>You can optionally use <code>ssh-agent</code> and the keys pair (two files) generated with <code>ssh-keygen</code> to connect to remote host. Read about <a href="http://mah.everybody.org/docs/ssh" target="_blank" rel="noopener noreferrer" class="external">using ssh-agent with ssh</a>.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11-test-upload-changed-files-command">11. Test <code>Upload Changed Files</code> command<a class="hash-link" href="#11-test-upload-changed-files-command" title="Direct link to heading">​</a></h3><p>Make sure you are in the Extension Development Host window.</p><p>Change some file and save it.</p><p>Press <code>F1</code> or <code>Ctrl+Shift+P</code> to open Command Palette and type:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SFTP: Upload Changed Files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see this command in the list of SFTP commands:</p><p><img loading="lazy" alt="Upload changing files" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmIAAAB+CAMAAACwA40dAAACwVBMVEUlJSY8PDwJR3ESFhggAAARFBcQExYYo/8Af9QPEhU/P0YICQvMzMwiO0wgl/////8lJYgYo/EICgwJR8ggRyYjJSYJR7GfR3EkdfFkZGQlJau/mXH/4sicYiYfYCYnZfEsRVYYl8ccdYgfo/940PZgmcElJYEGLUgJuegco/94R3HMrYEih/+BrcwlJWElR8c3lP97e3vBmWGBJSaxsbEOm/8JmdolO8egoKAlYpw3dqsYo/a6uroSo/8OYHEpJSa/v7/w0LElgqwYo9z/89oYh6tgJSYPEhTX/+jXuXGcv8Gsgiaf4v/X//ZUVFSszMEyZYgylNzw/+icv8wtLS4gICEfHyAeHh4cHB2/8/8KgvYKRW4YQFswMDDFxMQSg7HMv5wvUSYRcnEYm9oxlP8lYNwJYNo2hsfBza3X//8Mj/+f4vYaAQEshv/MzKyszKyLios+PT0lUdwKR3G/8/ZDQ0PX89o7OzssOybBzMyszMy2tbVBQUH///YYo+jw89oYj8gMR3E3lPH//+if4ujMzMHBv5wpdv8kJYgvlNzX4sjIyMimwsHEr6i4oJIJSYXw//8JcugkR8e7w8VyrMG+wremhnsVR3IeRmIJOFgWO1QJMUsNCAkadaiam5sJR3ZzZXMwTHHXucgWhsgbYMjBzMFFm7wyirRknLCnpagJXqK8rqEJR5u3mYyVg4iMdXNqR3E/R3GcmWE2LCwxJiYfCwvX7ug3lNx4R8HFw7+zw7UQdqwgR6suTI4fdYhYWFjw+fYwlPEshvG/0O+fueihr8BYo8CYnr5SmbpFf62SnJrBrYGcYoGcYmGcgiYsUSYNBgi/4tq/udp4mdoYj9oOctrw0Mg3dsemucOnr7i/r7WfR7GsrKwvdquuvKEbDJwJeo4nJYgaYYdLVX9VCmIPEl55OzumTzMPGSUMLRV7FhXqjQlBAAANBUlEQVR42uzaPW7CQBCG4axEgcRcYI6x0hRTbOETuMtPtWdwzxF8B3rulMNkxqzIOoQ4SFYia79XAhvb5aP9AZ4Oh93TpX1AaJX2hdTu7fXlGcRQADG0tf6IGAXUaiCGvgRiaGOBGLrpH4kppT78GHfxu6sJxNrtEWLuJ3YcqkTtrT9GEEOrEEsMYmhdYoNcp0iSOBIlIlLuTqNPmaKfxOScaIwTMc5E4vzIH/LDCcQabmEUG0inQ+qrUYyz+5I5MfM1ZDZifdLg1/kc/FTFPmUQa7fFiVJpCA6rJtbFcqkipnZMg92aOMZjHyxVu4CJsu0WifUps49mmefEON0QCzIRk6JRiUjtBMTaboEY59E4lbmyJlbGKZXiSXSiVo1ifku1jHgg1m4Ly/3MoWS2rsSy+DLLWcVsgkTsZU9q6k0UZw1lmTY9hLVY490nVjcQjfEyN4rvKM9E4o78Ttk3vmfKfN1RavDDeHRm2FG23V1iD36FL4ofkBCIod8EYmhj4V+vaB6Ioa0FYmgeiKGtdZcYQut0Swx9sG8mL04EURiHcgkemhwa4iE5eBAMAY/mohEDHmxpL96iwUAEcdSDoHiRuBBPEieKiSvqjIrbuF7EBUFw9+aKy03/Eb/vpWJPW+nEHkYztv0xMzX16uuZ1KtfXlU6M7GmXR5ic+fFiMX6Q5o9b+6cWTFisX4qRizWvyYPMRUr1h9QjFgsv2LEIqeyFaSy6QzvomGYihEbusrl9QEj68tl0xneRcMQFSM2dFlBhAEOy3SGd9HwF3Rpw4bRXvEYsaHL+u0xa6quP47YuZe7x1rHKhOPWjeOG4NBiNmFRCJRUVsS0L51CdHGTQU2Vc+zZ79S62DTSi1ZulwZMsILM+q3ZK+aP6kz4thr0ip6mmmI5dfOD7c0JKz9bEN77Frj6NWGwVgQYoApEDHwMlXEFiaTyWJYxLJJyME30UaMuXHsXTnpHJjfB55sHaP2QZUt9kFsa1oSGA6x7MrclBBrjR4/c3a8eWWs2Tp0xzD3QozcbNyhNhGxqkcJwNu4I7WESIVHjG0JM0D2wiIm9qgj5sosDcS8IHva+rhoIkaohoWYurb6lhJdbo8Z3gDEjuhaZSKGUGVdYp8PMYxeLABKumSLRRwock9lPXyvERO0pHVZlvi8rc+XXo35GEnWn2YkSh8s5z3EhC98SLyoTdGQpaj83pycBpCKrU+STjBi7L6D2T6I6g4iwiAGfPCzdQpTJTbyG5Hct4eRUCmk+bVfS47sl/phpXamOWIuTVfNK5+OjqrLR+/fVM/vf35tlLHeiJETciEbZdVfxXoiRqAqdPFKMiatdKWVIuZoxDDNhStzqTc5Pnd1D6OYb0aeSG5nM3XrBmKMw0lTVGR1clLU+DAn/atYtohFn1oVyx8uKp3CVAl8bcY3hMkeWZnDYbdbxeDgA/IQk3ybS6N1vXFzXF1ffeth+7ZqvnpwW/kUhFgHrqqBWAefXzdKYofCt5Eu4od+VddA7rh2QRBjYiCZIyei8dE9PH52MWc2oMl3FquBL/3B2fPqqMhAjHB4iLF0QEUfPHD7ECM8dCGHfRFj3nQKCQ+pEYQYIz0aMYwhOAkxybd/aQIQ+xYCMQACOn7dKDuE+RCDhaMY1IhVBDv96pNdhP1VLCOPUdjJdHuArYOYpOoep2CbGyXqOi/CpfWoQGYpb5IGYmYVI0xkaVAVc50AxHQK5Rcij5SjsesiBqjIloeY5NtYGm+jfNbdKC9tWHb2NzfKI1V8EjHzLOZJihdLFKvWr1UMV7Jhl5YOWj7EMB9m1utxBPPRQDEhBmLe1CKzV1qK4r6lss5gxEgCARqAGM8eTK2BmNCh8+eR7UcMPxmdyYjRf89cmq6uNY4p0cMHIY77VEX1RozcdFpKzmeQdxZjrDNWnXyfg0ctZk9Dxcb9iRiPAjQwNZAbcBZjXBSZvVKvP2sE51xL90dML3gGiPEEFYiYclnrTMQktbIYPIsh670Qs+/ehVEPLKxhkGFzabSarYnxM6/vNK9sP/58Ylz51fe+WEUNQEwYQwijHwqI6Q1TYjYCuJqWCwxTUmqdLlTs3f2JGDcAeUXp0gNr71eUjNfSWXyJyg2Mv3nrlfjoFMqG6SDrJFEjxiFHY+jdrfu4U+fbXBqtc5fbL1asuIVbr18ao4NvvYaXBnAaxFn+d5qR71G6Tij7uUsT3xcfqxx61DIJm1mI5R9HpTSFkHVyfRBhJy3TGd5FQzjxCDbD3gafDsTsEanC/5/Kp04v6q3Tp8qmM7yLhlBKlabzFELEtkH4J7f4Ly2GpBMLgnTCdIZ30TBU6SoWIxarqxixH+ycsWsTURzH31aQQyJYKIUmtJJAiW1DOoR2KVSawYBG6io0UIlLK3SKHQs2Org4uDmpo4uLiyi6qjg6Ofif+P2+e9frpXdtbZpyr3w/9O7l/d7vbvrwe++SexW+ESqm3eBiZEgxMYAUE74hxUQSKSZ8Q4qJJBek2OQN/MI9Y26OgbWJMcv0y1k2xTjn1rgxE0hzFK5eu25iTgiTuarJoLzRLFeNuAykKrYAmbIUgy9nVayyWz+kV92kMb8eBMFGE5+k2CUhRTF6Mz1uFj5DsWJsCcSbHi9chVJnVaz8Yr95omK3p9hIsctDqmIPXa06qhhCMxNjawnFMPrpBqRklp1iEYeKnFNZD98g7Oz5SX9soXqPY3txrr70aBEy1c3SE3RjxeAX/1xYeE2aYvQEklExUExWsVTFKBTb67ySjtk26jrFlvaxvqJhdVP5wCqGY369Rasqd6fM6kZzULEoLHwmVbFQruIRxUJ9BidKaofCN/0MWdQP/aKrgZhxYZtTDFKhaNE01+NRrkfqVR4vRmuxqlMsDKuM+U26YhQEdgxOlKFhCcWQwlEMOsVmrHahjkV27TBASYJULbNaNbFi9AuxcgCeTg1WsSgsfCZ9LVbEAcVS1mIxtnixRLFqDVYxXMmG3aiKrQZko4mZL1YMSv1AmUItIwOKMSy8J2O5DyBQumL0JmyJXZ+BeC3GWDhWXIi/5+Cqy5ayyu6htRgfM79jmfZuKkUxhFXB/CfrezEadrxi/ECbOPp2FjE3YdoYVFvD1Ux5bS/mMsx921rZDYIWHhb5RGnQtlyJqx5RzIb13YXnDP0DkhNQCCkmTocUE56hNy1EEikmfEOKiRETK3ZFiBGgKiZGjFPswX0pJkKkmPANKSaSSDHhG1JMjJRYsZxtciPRa4xGr76OhNLyed6sfaJi+dvkJsVGyE734hXL3yY3KXYY7xX7cidnm9xMmS/tu/f9g+AVFLMp0HRd296GoFSr7fV4rnVKy32cjZncZKhxr8QOu4w2cG4j/fdWrfsXh2EC8ngYgwuto332mNsttd19shXL2Sa3VXgE/RjnNXPbiy6lrN0iw7DzcQWurNgqRqVKXVPY6jDU2Gyb0DB0f/HMgdJer7DFo22QgEvavGTyj2GEN2Dva4+DSD++iuVrkxvMY0oLXuHPjrkU7REfhlCDfieaKOkWPxa+9Sge2UGUY/YjW3cwNTrczOhuwIbdfvv4tVi+NrnZM/SjYjQPJ5cixYaAKoU6RIpNPl/ZqZGOM4eD0bnRzVKME207ugFyeQH8RewYxfK1yW2girH6lev6TxfnX8WoGBpwoNgpqpiNxIqhQQlzt89WLG+b3OK12Fy4FkOKFBuaUrQWixXjsitSjK1di+FMYTIU67NkHSjWCNdixomWqVjONrlx6oRlUAxu2ifKMEWKDf9ECcs4qXWcIfbhsXugGLt7PRvsmAzF+Ow4ESkGX2t8osQtawhkK6btISJJnn6jlGJCion/IIeKCSHFxOmRYsI3pJhIIsWEb0gxkUSKCd/41979szYIhHEcPzAK0ky+h2SRdEinrrd0yNis3TsclAyhJPR1dMq7UMfO3UpeQduh/19Fn+eOisYGFz3x/H0gKMn65aJw+iAxOK7/M5Cm24UA19mbgSTrX3B+eonk3GNvBpKM9X5pJDY09mYgyVhv1Tm/fhwvxCzfqzPd8trGh/E9fTCOxjnWZiDliW3metwkP+tBifHCxXsPt3R4wirmInszkGSs06KeePXSudGRQuMzGeOP0lX2ZiBJ85i3Tuzm7G9rvhyzxWSOxFxlcQZSLNjhKma+nWAVc5aNGUiVxMQsvxbjizD+doNrMVfZmIFUTUzM9J8mJUZx8Skd+MZS4o7SPV1ND8HbUAajy8QwlHkQOkxMYmDuIOC9+1CGxKBvRgESgyIkBn1jEouQGLRlFPhIDFrEiXmUWDQCaIlvEotODu2zW+Ph+cOcZPvi7ypshrioE+Ze3sJuvb9+hwe+Pn9C+F/AqDCTWDUyla5KUlX+OWjGMgCH+VyYSaxqp5K7gkTtoiLlN2Ppg8s8TURHGkvXuZQKK1FeM+oT86D3RHSssSxZrckqyaiwdhK78sB9vxtKvvsBZD4fAAAAAElFTkSuQmCC" width="610" height="126" class="img_ev3q"></p><p>Try using the <code>Upload Changed Files</code> command with the <code>Ctrl+Alt+U</code> keyboard shortcut.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>To see the result of your action, open <code>sftp</code> output window by pressing <code>sftp</code> button:</p><p><img loading="lazy" alt="sftp button" src="/hm/assets/images/sftp-button-bdd4181024ed50dd3611cfee87267ac5.png" width="1024" height="768" class="img_ev3q"></p></div></div><p>After running the <code>Upload Changed Files</code> command, you should see many, many lines after the <code>run command 'Upload Changed Files'</code> line in the log output:</p><p><img loading="lazy" alt="uploading check is ok" src="/hm/assets/images/check-uploading-ok-9c89d3a6a331d5e08e332c1e2d4c8a3f.png" width="599" height="478" class="img_ev3q"></p><p>If you see only one line, then the command is not working:</p><p><img loading="lazy" alt="uploading check failed" src="/hm/assets/images/check-uploading-failed-b1ba1cbe94ed2cc21a6d9b017a7f3d9b.png" width="731" height="350" class="img_ev3q"></p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>If the <code>Upload Changed File</code> command does not work, remove the <code>dist</code> folder from the extension root and run compilation again. If that doesn't help, make sure you are using the last stable version of node. And maybe start from the beggining. If nothing helps, download my finished build file: <a href="https://github.com/soul-core/vscode-sftp/raw/master/sftp-workaround-upload-bug.vsix" target="_blank" rel="noopener noreferrer" class="external">github.com: sftp-workaround-upload-bug.vsix</a> and skip to step 14.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="12-prepare-build-script">12. Prepare build script<a class="hash-link" href="#12-prepare-build-script" title="Direct link to heading">​</a></h3><p>If the <code>Upload Changed File</code> command works, you can start rebuilding the <code>sftp</code> extension.</p><p>Let's simplify the build script first. Close Extension Development Host window, open <code>package.lock</code> file again and locate the <code>scripts</code> block. Find the <code>pub:debug</code> script:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"scripts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"vscode:prepublish"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"npm run compile"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"compile"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"webpack --mode production"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"dev"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"webpack --mode development --watch"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"test"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"jest"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"package"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vsce package"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"pub:debug"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"rm -rf _debug &amp;&amp; mkdir _debug &amp;&amp; vsce package --out _debug/sftp-debug.vsix &amp;&amp; cd _debug &amp;&amp; git init &amp;&amp; git commit --allow-empty -m 'update debug package' &amp;&amp; git checkout -b debug-pacakge &amp;&amp; cp ../INSTALL_DEBUG.md README.md  &amp;&amp; git add . &amp;&amp; git commit -am 'update debug package' &amp;&amp; git push git@github.com:liximomo/vscode-sftp.git debug-pacakge --force"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Replace the last <code>pub:debug</code> script with <code>build</code> one (see below):</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"scripts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"vscode:prepublish"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"npm run compile"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"compile"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"webpack --mode production"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"dev"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"webpack --mode development --watch"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"test"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"jest"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"package"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vsce package"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"build"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vsce package --no-yarn --out sftp-workaround-upload-bug.vsix"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>If you are using <code>yarn</code> instead of <code>npm</code>, remove <code>--no-yarn</code> option from the <code>build</code> script above.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13-build-vsix-extension">13. Build <code>.vsix</code> extension<a class="hash-link" href="#13-build-vsix-extension" title="Direct link to heading">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Make sure you already install the <code>Visual Studio Code Extension(vsce)</code> manager:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm i -g vsce</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>Make a new build of the <code>sftp</code> extension using the <code>build</code> script:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If everything is ok, you'll see the green <code>DONE</code> label in your terminal:</p><p><img loading="lazy" alt="build done" src="/hm/assets/images/build-done-vsce-a4a15e0b71c68301f5576030d25acaac.png" width="835" height="247" class="img_ev3q"></p><p>You have just created the <code>sftp-workaround-upload-bug.vsix</code> file in the root folder of the <code>sftp</code> extension.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14-install-vsix-extension">14. Install <code>.vsix</code> extension<a class="hash-link" href="#14-install-vsix-extension" title="Direct link to heading">​</a></h3><p>Open <code>VS-Code</code>, press <code>F1</code> and enter the command in Command Palette:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Extension: Install from VSIX...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Press Enter.</p><p>Locate the <code>.vsix</code> file in the dialog box and press <code>Install</code> button.</p><p>Enjoy!</p>]]></content>
        <author>
            <name>papa31</name>
            <uri>https://github.com/papa31</uri>
        </author>
        <category label="vsix" term="vsix"/>
        <category label="VS Code" term="VS Code"/>
        <category label="extension" term="extension"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Where Google Photos Hides Direct Links to Your Uploaded Images]]></title>
        <id>/2021/10/05/where-google-photos-hides-direct-links-to-your-uploaded-images</id>
        <link href="https://papa31.github.io/hm/blog/2021/10/05/where-google-photos-hides-direct-links-to-your-uploaded-images"/>
        <updated>2021-10-05T18:44:08.000Z</updated>
        <summary type="html"><![CDATA[How to find a direct link to embed Google Photos images on social media or on your website]]></summary>
        <content type="html"><![CDATA[<p>The main goal is to get a fixed direct link to your photo from Google Photos! Bu it's not that easy!</p><p>The photo below has this fixed direct link on Google Photos:</p><p><a href="https://lh3.googleusercontent.com/pw/AM-JKLWiH0X62S8qPDy165JJYKx05Z1OV-5PqEsAvXzpohl44xiQyQo1oLTvq0dntDINkcpnSMwQbgZnOOJ45sfxAjVHqI9LJ3_axfgdd-rkx8B5eEbHDaeKaUyLs_WoGbA9jw8FOw8IrKwTrdrNAzGWcgwSrg=w720-h405-no" target="_blank" rel="noopener noreferrer">https://lh3.googleusercontent.com/pw/AM-JKLWiH0X62S8qPDy165JJYKx05Z1OV-5PqEsAvXzpohl44xiQyQo1oLTvq0dntDINkcpnSMwQbgZnOOJ45sfxAjVHqI9LJ3_axfgdd-rkx8B5eEbHDaeKaUyLs_WoGbA9jw8FOw8IrKwTrdrNAzGWcgwSrg=w720-h405-no</a></p><p><img loading="lazy" src="https://lh3.googleusercontent.com/pw/AM-JKLWiH0X62S8qPDy165JJYKx05Z1OV-5PqEsAvXzpohl44xiQyQo1oLTvq0dntDINkcpnSMwQbgZnOOJ45sfxAjVHqI9LJ3_axfgdd-rkx8B5eEbHDaeKaUyLs_WoGbA9jw8FOw8IrKwTrdrNAzGWcgwSrg=w720-h405-no" class="img_ev3q"></p><p>And you can paste it everywhere! Including markdown editors.</p><p>You can get the same direct link to any image you upload to Google Photos.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="on-pc">On PC<a class="hash-link" href="#on-pc" title="Direct link to heading">​</a></h2><ol><li>Login Google Photos</li><li>Make a shared album and add a photo to it.</li><li>Create a shared link of it.</li><li>Logout or use Incognito mode (Private Browsing) to open the shared link.</li><li>Expanding view.</li><li>Rigt-click image. Again right-click image.</li><li>Select <code>Copy image address</code> in the right-click context menu.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="on-android">On Android<a class="hash-link" href="#on-android" title="Direct link to heading">​</a></h2><ol><li>Copy shared link</li><li>Open a new tab in incognito mode</li><li>Past the copied link into the address bar</li><li>When the image is open, tap on it to expand</li><li>Then, long tap on the image (to simulate <code>right click</code>) and choose <code>Open in a new tab</code> from the menu that appears</li><li>Go to an open tab and copy the content of the address bar</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="editing-a-link">Editing a link<a class="hash-link" href="#editing-a-link" title="Direct link to heading">​</a></h2><p>You can get the link like format below. If you delete a shared folder, so a direct link to the photo is deleted too.</p><p>Last of "=w1236-h825" is size, you can change. If you change it to "=d", it will be original size stored on the cloud (=downloading size).</p><p><a href="https://lh3.googleusercontent.com/AHkNnZu4yKszAR6zIH6xgFJwXPKoBvxjk5xmHrJJ0CHCyFGNg6pKzj-Rz9SlvYI7V6W5ILufr86BSmpDEm8WxGx3inNHWEZ9NHwyxdW2btxungwKC5ZrjOCrlswubbY2bLShnZttgg=w1236-h825-no" target="_blank" rel="noopener noreferrer">https://lh3.googleusercontent.com/AHkNnZu4yKszAR6zIH6xgFJwXPKoBvxjk5xmHrJJ0CHCyFGNg6pKzj-Rz9SlvYI7V6W5ILufr86BSmpDEm8WxGx3inNHWEZ9NHwyxdW2btxungwKC5ZrjOCrlswubbY2bLShnZttgg=w1236-h825-no</a></p><p>Source: <a href="https://support.google.com/photos/thread/10444052/problem-uploading-link-for-markdown?hl=en&amp;msgid=14212672" target="_blank" rel="noopener noreferrer" class="external">support.google.com: Problem Uploading Link For Markdown</a></p>]]></content>
        <author>
            <name>papa31</name>
            <uri>https://github.com/papa31</uri>
        </author>
        <category label="Google Photos" term="Google Photos"/>
        <category label="social media" term="social media"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[nvs: One Node Version Per Terminal in Windows]]></title>
        <id>/2021/09/19/nvs-one-node-version-per-terminal-in-windows</id>
        <link href="https://papa31.github.io/hm/blog/2021/09/19/nvs-one-node-version-per-terminal-in-windows"/>
        <updated>2021-09-19T13:47:35.000Z</updated>
        <summary type="html"><![CDATA[I tried setting up the better known nvm-windows to automatically change the node version. But unsuccessfully!]]></summary>
        <content type="html"><![CDATA[<p>I tried setting up the better known <a href="https://github.com/coreybutler/nvm-windows" target="_blank" rel="noopener noreferrer">nvm-windows</a> to automatically change the <code>node</code> version. But unsuccessfully!</p><p>When I used to run <code>nvm use</code> the node version changed globally.</p><p>I have read about <a href="https://github.com/jasongin/nvs#automatic-switching-per-directory" target="_blank" rel="noopener noreferrer" class="external">nvs: Automatic Switching Per Directory (github.com)</a> in <code>nvs readme file</code> and decided to give it a try.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remove-nvm-windows">Remove nvm-windows<a class="hash-link" href="#remove-nvm-windows" title="Direct link to heading">​</a></h2><p>Go to <code>C:\Users\[username]\AppData\Roaming\nvm</code> and run <code>unins000.exe</code> by double clicking it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install-nvs">Install nvs<a class="hash-link" href="#install-nvs" title="Direct link to heading">​</a></h2><p>I downloaded the <a href="https://github.com/jasongin/nvs/releases/tag/v1.6.0" target="_blank" rel="noopener noreferrer" class="external">nvs-1.6.0.msi</a> version of <code>nvs</code> and then ran this file by double clicking on it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="adding-node-versions">Adding node versions<a class="hash-link" href="#adding-node-versions" title="Direct link to heading">​</a></h2><p>To add a specific <code>node</code> version, run <code>nvs add</code> with the version number:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ nvs add 12</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">21</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Adding: node/12</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">21</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0/x64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Extracting  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token comment" style="color:#999988;font-style:italic">###########################] 100%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PATH </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$env</span><span class="token plain">:LOCALAPPDATA\nvs\node\12</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">21</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0\x64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setting-the-default-node-version">Setting the default node version<a class="hash-link" href="#setting-the-default-node-version" title="Direct link to heading">​</a></h2><p>Run <code>nvs link</code> with the version number:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nvs link 12</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">21</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setup-git-bash">Setup Git-Bash<a class="hash-link" href="#setup-git-bash" title="Direct link to heading">​</a></h2><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p><code>Git-Bash</code> is my fallback. It allows the use Unix command sintax.</p></div></div><p>Add to <code>C:\Users\[username]\.bash_profile</code> these two lines:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">.bash_profile</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -f ~/.bashrc </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> ~/.bashrc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add to <code>C:\Users\[username]\.bashrc</code> these lines (if this file is missing, create it in <code>notepad</code>):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">.bashrc</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-name function" style="color:#d73a49">setupNvs</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NVS_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$LOCALAPPDATA</span><span class="token string entity" style="color:#36acaa">\\</span><span class="token string" style="color:#e3116c">nvs"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -s </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$NVS_HOME</span><span class="token string" style="color:#e3116c">/nvs.sh"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$NVS_HOME</span><span class="token string" style="color:#e3116c">/nvs.sh"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /dev/null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setupNvs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Look at th line <code>export NVS_HOME="$LOCALAPPDATA\\nvs";</code> this is where <code>windows env</code> (%LOCALAPPDATA%\nvs) is converted to <code>unix env</code>. In case of error see for example: <a href="https://superuser.com/questions/1284276/how-to-use-localappdata-with-git-bash-in-windows" target="_blank" rel="noopener noreferrer" class="external">superuser.com: How To Use Localappdata With Git Bash In Windows</a></p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nvs-basic-usage">nvs Basic Usage<a class="hash-link" href="#nvs-basic-usage" title="Direct link to heading">​</a></h2><p>Open <code>PowerShell</code> or <code>Git-Bash</code> terminal.</p><p>Let's create two project folders with two different <code>.nvmrc</code> files using these commands:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">PowerShell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Git-Bash</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"10.24.0"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Out-File</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc     </span><span class="token comment" style="color:#999988;font-style:italic"># create .nvmrc file with node version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token namespace" style="opacity:0.7">[string]</span><span class="token plain">::Join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"`n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">gc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc  </span><span class="token comment" style="color:#999988;font-style:italic"># convert the line above from Windows to Unix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"14.16.0"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Out-File</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc     </span><span class="token comment" style="color:#999988;font-style:italic"># create .nvmrc file with node version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token namespace" style="opacity:0.7">[string]</span><span class="token plain">::Join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"`n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">gc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc  </span><span class="token comment" style="color:#999988;font-style:italic"># convert the line above from Windows to Unix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"10.24.0"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> .nvmrc     </span><span class="token comment" style="color:#999988;font-style:italic"># create .nvmrc file with node version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"14.16.0"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> .nvmrc     </span><span class="token comment" style="color:#999988;font-style:italic"># create .nvmrc file with node version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="manual-switching-using-nvmrc">Manual switching using <code>.nvmrc</code><a class="hash-link" href="#manual-switching-using-nvmrc" title="Direct link to heading">​</a></h2><p>Let's go to the project <code>one</code> and run <code>nvs auto</code> (in <code>PowerShell</code> or <code>Git-Bash</code>):</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ nvs auto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PATH </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$env</span><span class="token plain">:LOCALAPPDATA\nvs\default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PATH </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$env</span><span class="token plain">:LOCALAPPDATA\nvs\node\10</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">24</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0\x64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If everything is ok, <code>nvs</code> will automatically download the correct <code>node</code> version and activate it.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>In case of an error, you may need to edit or replace this line:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">PowerShell</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token namespace" style="opacity:0.7">[string]</span><span class="token plain">::Join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"`n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">gc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sc</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nvmrc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>source: <a href="https://stackoverflow.com/questions/5102115/unix-format-files-with-powershell" target="_blank" rel="noopener noreferrer" class="external">stackoverflow.com: Unix Format Files With Powershell</a></p></div></div><p>Then open second terminal, go to the project <code>two</code> folder and again run <code>nvs auto</code>:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ nvs auto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PATH </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$env</span><span class="token plain">:LOCALAPPDATA\nvs\default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PATH </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$env</span><span class="token plain">:LOCALAPPDATA\nvs\node\14</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0\x64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Again, <code>nvs</code> install the required node version and then change the <code>environment variable</code> to use it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="check-switching-ability">Check Switching Ability<a class="hash-link" href="#check-switching-ability" title="Direct link to heading">​</a></h2><p>Check the version of node in the folder <code>one</code>  (in first terminal):</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ node </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v10</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">24</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Check the node version in the folder <code>two</code> (in second terminal):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ node -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14.26.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Hence, <code>nvs</code> changes the node versions locally, one node version per terminal.</p></div></div><p>Which was required to check.</p>]]></content>
        <author>
            <name>papa31</name>
            <uri>https://github.com/papa31</uri>
        </author>
        <category label="nvs" term="nvs"/>
        <category label="node" term="node"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Docusaurus: Test & Build]]></title>
        <id>/2020/12/23/docusaurus-test-and-build</id>
        <link href="https://papa31.github.io/hm/blog/2020/12/23/docusaurus-test-and-build"/>
        <updated>2020-12-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Setup all 3 ways Docusaurus start]]></summary>
        <content type="html"><![CDATA[<p>What if the local Docusaurus runs successfully, but the remote build fails.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initial-setup">Initial Setup<a class="hash-link" href="#initial-setup" title="Direct link to heading">​</a></h2><p>Initially I configured Docusaurus-v2 to:</p><ol><li>start the development server <code>npm run start</code> and</li><li>upload my content to GitHub using <code>git push</code>.</li></ol><p>The simplified test pages were fine. But when rendering many markdown files with links and images, deployment fails.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="broken-links">Broken Links<a class="hash-link" href="#broken-links" title="Direct link to heading">​</a></h2><p>This is the most common error. Best of all, you won't catch this error when you test pages through the development server with <code>npm run start</code>.</p><p>::: note Broken Links You can only catch <code>broken links</code> when you <strong>build</strong>. :::</p><p>I immediately got a broken link error when I uploaded quite a few raw pages on GitHub. But finding broken links on a remote server is not easy. Not enough information. You have to make <strong>frequent commits</strong>. And often without success.</p><p>To fix the broken links' problem <code>without extra commits</code>, you need to do a local build.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="local-build">Local Build<a class="hash-link" href="#local-build" title="Direct link to heading">​</a></h2><p>To make build on your local machine and run server is not too hard:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run serve</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But there are pitfalls — <code>unstable BaseUrl</code>. In local build — ... In remote build — ...</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unstable-baseurl">Unstable BaseUrl<a class="hash-link" href="#unstable-baseurl" title="Direct link to heading">​</a></h2><p>This is common issue for <strong>node world</strong> projects: for local build you need to use the one data, for remote build the other data.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="productiondevelopment-issue">production/development issue<a class="hash-link" href="#productiondevelopment-issue" title="Direct link to heading">​</a></h3><p>In first case I need:</p><p><code>baseUrl = '/hm/'</code></p><p>in other case:</p><p><code>baseUrl = '/'</code></p><p>One of the typical ways to resolve the problem is to use environment variables — <code>env</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="env">env<a class="hash-link" href="#env" title="Direct link to heading">​</a></h2><p>The Docusaurus documentation has a section on <a href="https://v2.docusaurus.io/docs/deployment/#environment-settings" target="_blank" rel="noopener noreferrer">Environment settings</a>. But there is not enough information about utilities such as <code>cross-env</code>. This is a utility that Docusaurus itself uses.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cross-env">cross-env<a class="hash-link" href="#cross-env" title="Direct link to heading">​</a></h3><p>Run scripts that set and use environment variables across platforms</p><p>Install:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --save-dev cross-env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Three lines:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">package.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"notes"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.0.0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"private"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"homepage"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/hm"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"scripts"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"docusaurus"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"docusaurus"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"start"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cross-env BASE_URL='/hm/' docusaurus start"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"build"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"docusaurus build"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"swizzle"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"docusaurus swizzle"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"deploy"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cross-env BASE_URL='/hm/' GIT_USER=git USE_SSH=true docusaurus deploy"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"serve"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"docusaurus serve"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"clear"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"docusaurus clear"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Two lines:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> baseUrl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">BASE_URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'hm'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">tagline</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Human@Machine'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://papa31.github.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  baseUrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">onBrokenLinks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'throw'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token spread operator" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>If you get the error:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">'cross-env' is not recognized</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can run these two commands in your <code>bash</code> (Linux) or <code>Git Bash</code> (Windows):</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf node_modules package-lock.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or you can try <a href="https://stackoverflow.com/questions/45034581/laravel-5-4-cross-env-is-not-recognized-as-an-internal-or-external-command" target="_blank" rel="noopener noreferrer">install cross-env globally</a></p></div></div><p>But how do I add an environment variable remotely?</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set-remote-env">Set Remote <code>env</code><a class="hash-link" href="#set-remote-env" title="Direct link to heading">​</a></h3><p>You need use workflow file. Edit one line:</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/.github/workflows/documentation.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Release to GitHub Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">USE_SSH</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">GIT_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">BASE_URL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/hm/'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          git config --global user.email "actions@gihub.com"</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          git config --global user.name "gh-actions"</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          if [ -e yarn.lock ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          yarn install --frozen-lockfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          elif [ -e package-lock.json ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          npm ci</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          else</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          npm i</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          npx docusaurus deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="todo-insert-whole-files-as-in-docusaurus-site-docs">todo: insert whole files as in Docusaurus site docs(?)<a class="hash-link" href="#todo-insert-whole-files-as-in-docusaurus-site-docs" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="windows">Windows<a class="hash-link" href="#windows" title="Direct link to heading">​</a></h2><p>If error:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">PowerShell</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">'cross-env'</span><span class="token plain"> is not recognized as an internal or external command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">operable program or batch file</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run this:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">rf node_modules &amp;&amp; npm install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Doesn't help? Read other tips from <a href="https://stackoverflow.com/questions/43685777/laravel-mix-sh-1-cross-env-not-found-error" target="_blank" rel="noopener noreferrer">stackoverflow</a>.</p>]]></content>
        <author>
            <name>papa31</name>
            <uri>https://github.com/papa31</uri>
        </author>
        <category label="docusaurus" term="docusaurus"/>
        <category label="settings" term="settings"/>
        <category label="broken links" term="broken links"/>
        <category label="env" term="env"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Yandex.disk: Использование облачного хранилища в Линукс]]></title>
        <id>/2020/12/21/yandex-disk-usage-cloud-storage</id>
        <link href="https://papa31.github.io/hm/blog/2020/12/21/yandex-disk-usage-cloud-storage"/>
        <updated>2020-12-21T15:34:11.000Z</updated>
        <summary type="html"><![CDATA[В настоящее время очень популярным инструментом для доступа и управления файлами являются так называемые облачные хранилища.]]></summary>
        <content type="html"><![CDATA[<p>В настоящее время очень популярным инструментом для доступа и управления файлами являются так называемые облачные хранилища.</p><p>source: <a href="https://itproffi.ru/yandeks-disk-ispolzovanie-oblachnogo-hranilishha-v-linux/" target="_blank" rel="noopener noreferrer">https://itproffi.ru/yandeks-disk-ispolzovanie-oblachnogo-hranilishha-v-linux/</a></p><p>Они предполагают размещение пользовательских данных на доступных через интернет удалённых серверах т.е. в «облаке» и доступ к нему посредством специального программного обеспечения (ПО) и протоколов. Компании-разработчики облачных хранилищ и сред поддерживают практически все популярные платформы и операционные системы (ОС) для взаимодействия пользователей с облаком. Не стала исключением и компания «Яндекс», которая вместе с предоставляемым ею сервисом «Яндекс.Диск» предлагает пользователям и одноимённый продукт для удобного пользования, собственно, самим сервисом. В этой статье речь пойдёт об утилите Яндекс.Диск и её использовании в Linux.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="загрузка-и-установка-пакета-яндексдиск">Загрузка и установка пакета Яндекс.Диск<a class="hash-link" href="#загрузка-и-установка-пакета-яндексдиск" title="Direct link to heading">​</a></h2><p>Сама утилита представляет собой демон, постоянно работающий в памяти и следящий за изменениями определённых файлов и каталогов в локальном и удалённом хранилище (облаке) и реагирует на определённые события (добавление, удаление, переименование и/или изменение файлов/каталогов), запуская синхронизацию, которая актуализирует данные в облаке и локальных хранилищах.</p><p>Утилита является бесплатной и, как указывают сами разработчики, написана на языке C++ в IDE Kdevelop. Распространяется Яндекс.Диск в виде пакетов <em>.deb и </em>.rpm, которые можно скачать и установить как вручную (используя менеджер пакетов apt например), так и при помощи системы управления пакетами используемой ОС.</p><p>Для Debian-ориентированной системы для установки Яндекс.Диск через систему <a href="https://itproffi.ru/ustanovka-programm-v-linux/" target="_blank" rel="noopener noreferrer">управления пакетами (СУП)</a> нужно выполнить следующие команды:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo echo "deb http://repo.yandex.ru/yandex-disk/deb/ stable main" | sudo tee -a /etc/apt/sources.list.d/yandex-disk.list &gt; /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install yandex-disk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>В результате в системный репозиторий будет добавлен новый источник «deb <a href="http://repo.yandex.ru/yandex-disk/deb/" target="_blank" rel="noopener noreferrer">http://repo.yandex.ru/yandex-disk/deb/</a> stable main» со стабильными сборками Яндекс.Диск, из которого будет производиться установка и последующие обновления утилиты.</p><p>Для RPM-ориентированных систем порядок установки с помощью СУП несколько иной. Нужно для начала вручную создать и отредактировать файл источника для добавления его в системный репозиторий:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/yum.repos.d/yandex.repo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Запустится текстовый редактор nano (который сразу создаст файл yandex.repo по указанному пути), в котором нужно ввести следующее содержимое:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\[yandex\]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name=Yandex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">failovermethod=priority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseurl=http://repo.yandex.ru/yandex-disk/rpm/stable/$basearch/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata_expire=1d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgkey=http://repo.yandex.ru/yandex-disk/YANDEX-DISK-KEY.GPG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Далее, сохранить сделанные изменения, нажав сочетание клавиш , подтвердить сохранение (Enter), закрыть редактор <a href="https://itproffi.ru/tekstovyj-redaktor-nano/" target="_blank" rel="noopener noreferrer">nano</a> (Ctrl + X) и выполнить следующие команды:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo rpm --import http://repo.yandex.ru/yandex-disk/YANDEX-DISK-KEY.GPG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install yandex-disk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Все эти действия выполняются и при использовании пакетных менеджеров, если сначала вручную скачать пакеты Яндекс.Диска через веб-браузер (или утилиту wget), например для deb-пакетов:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo dpkg -i yandex-disk\_latest\_amd64.deb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Для rpm-пакетов:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo rpm -ivh yandex-disk\_latest.x86\_64.rpm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Сами пакеты для нужных платформ и под соответствующую архитектуру можно скачать по адресу: <a href="https://disk.yandex.ru/download#pc" target="_blank" rel="noopener noreferrer">https://disk.yandex.ru/download#pc</a>.</p><p>Также может потребоваться импортировать с помощью <a href="https://itproffi.ru/utilita-wget-v-linux/" target="_blank" rel="noopener noreferrer">wget</a> открытые GPG-ключи для проверки цифровой подписи пакетов, если это по какой-либо причине не произошло автоматически при использовании СУП или менеджера пакетов. Для Debian:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget -O YANDEX-DISK-KEY.GPG http://repo.yandex.ru/yandex-disk/YANDEX-DISK-KEY.GPG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-key add YANDEX-DISK-KEY.GPG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Для RPM:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo rpm --import http://repo.yandex.ru/yandex-disk/YANDEX-DISK-KEY.GPG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="управление-демоном-из-командной-оболочки">Управление демоном из командной оболочки<a class="hash-link" href="#управление-демоном-из-командной-оболочки" title="Direct link to heading">​</a></h2><p>Разработчики Яндекс.Диска в реализации этого проекта постарались максимально придерживаться принципов так называемой концепции UNIX-Way, которая предполагает при разработке ПО соблюдение следующих принципов:</p><ul><li>программа должна быть очень (насколько это возможно) небольшой;</li><li>программа должна выполнять только одну простую задачу, но выполнять её хорошо;</li><li>программа должна легко взаимодействовать с другими программами.</li></ul><p>Утилита Яндекс.Диск, как уже говорилось, работает как демон (в хорошем смысле…), а потому основной метод управления ею — это дискретные команды с соответствующими опциями и параметрами. Эти команды могут выполняться как непосредственно пользователем в командной оболочке, так и другими программами, которые могут быть графическими оболочками для демона Яндекс.Диска, как в виде оконных приложений, так и в виде виджетов и/или апплетов рабочего стола. Некоторые достойные реализации (YD-tools, Yandex.Disk ServiceMenu) графического пользовательского интерфейса (GUI) давно существуют.</p><p><a target="_blank" href="/hm/assets/files/GUI-YD-tools-dlya-sredy-KDE-ae48877c2076a1eab983afa431f06554.png"><img loading="lazy" src="/hm/assets/images/GUI-YD-tools-dlya-sredy-KDE-ae48877c2076a1eab983afa431f06554.png" width="364" height="357" class="img_ev3q"> </a></p><p>Для управления клиентом Яндекс.Диск предназначена команда yandex-disk, её общий синтаксис следующий:</p><p>yandex-disk внутренняя_команда <!-- -->[<!-- -->ОПЦИИ<!-- -->]</p><p>Внутренними командами утилиты yandex-disk являются команды управления демоном синхронизации, а также команды его настройки, которые приведены в следующей таблице:</p>Начальное конфигурирование демона.<table><thead><tr><th><strong>Команда</strong></th><th><strong>Назначение</strong></th></tr></thead><tbody><tr><td>start</td><td>Запускает&nbsp;как&nbsp;демон&nbsp;и&nbsp;начинает&nbsp;синхронизацию&nbsp;каталога. В&nbsp;файл&nbsp;«.sync/status»&nbsp;каталога синхронизации&nbsp;записывается&nbsp;текущий&nbsp;статус&nbsp;синхронизации.</td></tr><tr><td>stop</td><td>Останавливает демон.</td></tr><tr><td>status</td><td>Выводит&nbsp;статус&nbsp;демона:&nbsp;статус&nbsp;синхронизации,&nbsp;ошибки,&nbsp;последние&nbsp;синхронизированные&nbsp;файлы,&nbsp;состояние&nbsp;дискового&nbsp;пространства.</td></tr><tr><td>token</td><td>Получает&nbsp;OAuth-токен,&nbsp;шифрует&nbsp;и&nbsp;сохраняет&nbsp;его&nbsp;в&nbsp;специальном&nbsp;файле&nbsp;(по&nbsp;умочанию&nbsp;— /.config/yandex-disk/passwd).&nbsp;Если&nbsp;не&nbsp;указаны&nbsp;опции&nbsp;-p PASSWORD&nbsp;или&nbsp;—password&nbsp;PASSWORD,&nbsp;то&nbsp;выводит приглашение&nbsp;ввести&nbsp;пароль&nbsp;из&nbsp;STDIN.</td></tr><tr><td>sync</td><td>Синхронизирует&nbsp;каталог&nbsp;и&nbsp;завершение работы&nbsp;(если&nbsp;демон&nbsp;запущен,&nbsp;дождается&nbsp;окончания&nbsp;синхронизации).&nbsp;Требуется для ручной синхронизации по требованию.</td></tr><tr><td>publish</td><td>Делает&nbsp;файл/каталог&nbsp;публичным&nbsp;и&nbsp;выводит&nbsp;ссылку&nbsp;в STDOUT.&nbsp;Сам объект&nbsp;будет&nbsp;скопирован&nbsp;в&nbsp;синхронизируемый&nbsp;каталог.&nbsp;Для&nbsp;перезаписи&nbsp;существующих&nbsp;объектов&nbsp;следует использовать&nbsp;опцию&nbsp;—overwrite.</td></tr><tr><td>unpublish</td><td>Удаляет&nbsp;публичный&nbsp;доступ&nbsp;к&nbsp;файлу/каталогу.</td></tr><tr><td>setup</td><td>Начальное конфигурирование демона.</td></tr><tr><td></td><td></td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="начальное-конфигурирование-демона">Начальное конфигурирование демона.<a class="hash-link" href="#начальное-конфигурирование-демона" title="Direct link to heading">​</a></h2><p>Соответственно, сами эти команды могут выполняться в следующем виде:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yandex-disk start \[OPTION\]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yandex-disk stop \[OPTION\]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yandex-disk status \[OPTION\]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yandex-disk sync \[OPTION\]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yandex-disk token \[-p, --password=PASSWORD\] \[OPTION\] USERNAME \[FILE\]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yandex-disk publish \[OPTION\] FILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yandex-disk unpublish FILE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>В следующей таблице приводится описание всех доступных для yandex-disk опций:</p><table><thead><tr><th><strong>Опция</strong></th><th><strong>Описание</strong></th></tr></thead><tbody><tr><td>--config=FILE, -c FILE</td><td>Читает&nbsp;опции&nbsp;из&nbsp;конфигурационного&nbsp;файла.&nbsp;Файл&nbsp;должен&nbsp;содержать&nbsp;строки&nbsp;вида&nbsp;имя=значение.&nbsp;Путь&nbsp;к&nbsp;файлу&nbsp;по&nbsp;умолчанию&nbsp;~/.config/yandex-disk/config.cfg.</td></tr><tr><td>--dir=DIR, -d DIR</td><td>Задаёт путь&nbsp;к&nbsp;каталогу&nbsp;Яндекс.Диска.</td></tr><tr><td>--auth=FILE, -a FILE</td><td>Читает данные&nbsp;токена&nbsp;из&nbsp;файла.&nbsp;Файл&nbsp;должен&nbsp;быть&nbsp;сгенерирован&nbsp;командой&nbsp;token.&nbsp;Путь&nbsp;к&nbsp;файлу&nbsp;по&nbsp;умолчанию&nbsp;~/.config/yandex-disk/passwd.</td></tr><tr><td>--exclude-dirs=DIR1,DIR2,…</td><td>Исключает из синхронизации указанные каталоги.</td></tr><tr><td>--read-only</td><td>Указывает&nbsp;не&nbsp;загружать&nbsp;локальные&nbsp;изменения&nbsp;в облако.&nbsp;Измененные&nbsp;локально&nbsp;файлы&nbsp;будут&nbsp;переименованы.</td></tr><tr><td>--overwrite</td><td>Указывает&nbsp;в&nbsp;режиме&nbsp;«read-only»&nbsp;перезаписывать&nbsp;локально&nbsp;измененные&nbsp;файлы.</td></tr><tr><td>--no-daemon, -D</td><td>Запускает&nbsp;демон&nbsp;без&nbsp;возможности управления через командную оболочку.&nbsp;Чтобы&nbsp;вернуть&nbsp;управление,&nbsp;демон&nbsp;необходимо&nbsp;остановить,&nbsp;запустив&nbsp;в&nbsp;другой&nbsp;консоли&nbsp;команду&nbsp;yandex-disk stop&nbsp;или&nbsp;закрыв&nbsp;текущую&nbsp;консоль.</td></tr><tr><td>--version, -v</td><td>Выводит&nbsp;информацию&nbsp;о&nbsp;версии.</td></tr><tr><td>--proxy=PARAM</td><td>Задаёт настройки&nbsp;прокси-сервера.&nbsp;Допустимые&nbsp;параметры: auto —&nbsp;использовать&nbsp;системные&nbsp;настройки&nbsp;прокси-сервера&nbsp;—&nbsp;&nbsp;используется&nbsp;по&nbsp;умолчанию, no —&nbsp;не&nbsp;использовать&nbsp;прокси&nbsp;сервер.&nbsp;protocol,address,port,login,password&nbsp;—&nbsp;настроить&nbsp;вручную.&nbsp;Пример&nbsp;настройки&nbsp;прокси-сервера&nbsp;вручную: proxy=socks4,my.proxy.local,1080,login,password</td></tr><tr><td></td><td></td></tr></tbody></table><p>Как можно видеть, разработчики подошли к реализации утилиты Яндекс.Диск, что называется — «по-настоящему», ярко отразив в ней философию маленькой, эффективной, простой и удобной UNIX-программы. Все команды и опции говорят сами за себя и настройка демона Яндекс.Диск не вызывает никаких сложностей.</p><p>Первое, что необходимо выполнить в командной строке, после установки утилиты Яндекс.Диск — это запустить начальную настройку её демона с помощью команды:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ yandex-disk setup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Далее нужно проследовать несложному процессу, в ходе которого будет предложено создать защищённый токен на основе учётных данных, задать настройки прокси-сервера (если предполагается его использовать), указать путь к каталогу синхронизации, а также определить опции автозапуска демона при входе в систему:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ yandex-disk setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Использовать прокси-сервер? \[y/N\]: N</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Авторизация</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Если у вас ещё нет аккаунта на Яндексе, его можно завести по ссылке https://passport.yandex.ru/passport?mode=register</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Введите логин: mylogin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Введите пароль:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Токен сохранен в /home/john/.config/yandex-disk/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Настройка Яндекс.Диска</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Введите путь к папке Яндекс.Диска (Оставьте пустым для использования папки '/home/john/Yandex.Disk'): /media/john/Yandex.Disk/Disk/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Запускать Яндекс.Диск при входе в систему? \[Y/n\]: Y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Запуск демона...Готово</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>В приведённом примере производится настройка демона синхронизации для учетной записи <em>mylogin</em> без задействования прокси-сервера. Каталогом для синхронизации в данном случае является каталог Disk на отдельном разделе (или устройстве) Yandex.Disk.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="интеграция-с-файловым-менеджером">Интеграция с файловым менеджером<a class="hash-link" href="#интеграция-с-файловым-менеджером" title="Direct link to heading">​</a></h2><p>Поскольку сервис Яндекс.Диск поддерживает работу по протоколу WebDAV, то синхронизацию легко настроить для приложений, которые поддерживают эту технологию. В Linux таковыми являются например файловые менеджеры Dolphin (для среды <a href="https://itproffi.ru/graficheskie-sredy-gnome-i-kde/" target="_blank" rel="noopener noreferrer">KDE</a>), а также Nautilus – для среды <a href="https://itproffi.ru/graficheskie-sredy-gnome-i-kde/" target="_blank" rel="noopener noreferrer">GNOME</a>.</p><p><a target="_blank" href="/hm/assets/files/Punkty-kontekstnogo-menyu-dlya-YAndeks.Disk-v-Dolphin-8c7a80519282a3b2a9042bf5b2f18262.png"><img loading="lazy" src="/hm/assets/images/Punkty-kontekstnogo-menyu-dlya-YAndeks.Disk-v-Dolphin-8c7a80519282a3b2a9042bf5b2f18262.png" width="410" height="488" class="img_ev3q"> </a></p><p>Сама настройка файлового менеджера для работы через WebDAV совсем несложна и на примере Dolphin выглядит следующим образом:</p><ul><li><p>Для начала в адресной строке файлового менеджера нужно перейти по адресу webdavs://webdav.yandex.ru.</p></li><li><p>Далее, в появившемся диалоговом окне требуется ввести имя пользователя и пароль для доступа к облачному хранилищу.</p><p><a target="_blank" href="/hm/assets/files/Integratsiya-YAndeks.Disk-s-fajlovym-meneddzherom-vvod-adresa-i-avtorizatsiya-feda9b1d72edf9d6ca0753a9f0812e5c.png"><img loading="lazy" src="/hm/assets/images/Integratsiya-YAndeks.Disk-s-fajlovym-meneddzherom-vvod-adresa-i-avtorizatsiya-feda9b1d72edf9d6ca0753a9f0812e5c.png" width="795" height="485" class="img_ev3q"> </a></p></li><li><p>После успешной авторизации Dolphin отобразит содержимое облачного хранилища, как-будто это локальный каталог.</p></li><li><p>По желанию можно добавить данный адрес в список точек «быстрого входа» в Dolphin, чтобы каждый раз не вводить адрес вручную.</p><p><a target="_blank" href="/hm/assets/files/Dobavlenie-yarlyka-udalyonnogo-oblaka-YAndeks.Disk-v-Dolphin-78934a96b40ae8448012335a60eb4646.png"><img loading="lazy" src="/hm/assets/images/Dobavlenie-yarlyka-udalyonnogo-oblaka-YAndeks.Disk-v-Dolphin-78934a96b40ae8448012335a60eb4646.png" width="403" height="200" class="img_ev3q"> </a></p></li></ul><p>Как можно видеть, благодаря грамотной реализации для Linux-систем и поддержке современных технологий для работы и защиты данных в удалённых хранилищах, утилита Яндекс.Диск легко и гибко способна организовать синхронизацию файлов. Для системных администраторов она примечательна ещё и тем, что полностью соответствует принципам администрирования UNIX/Linux систем. И если в это позволяет политика и регламент безопасности сети организации, то утилита Яндекс.Диск — это отличный вариант предоставить пользователям инструмент для синхронизации их данных с облаком.</p>]]></content>
        <author>
            <name>itproffi</name>
        </author>
        <category label="yandex-disk cli" term="yandex-disk cli"/>
        <category label="cloud storage" term="cloud storage"/>
        <category label="linux" term="linux"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Sed: Normalize markdown file with Regex]]></title>
        <id>/2020/11/26/sed-normalize-md-file-with-regex</id>
        <link href="https://papa31.github.io/hm/blog/2020/11/26/sed-normalize-md-file-with-regex"/>
        <updated>2020-11-26T21:13:28.000Z</updated>
        <summary type="html"><![CDATA[How to normalize markdown file with Regex]]></summary>
        <content type="html"><![CDATA[<p>Once upon a time I found this page:</p><p><a href="http://sethrobertson.github.io/GitBestPractices/" target="_blank" rel="noopener noreferrer">http://sethrobertson.github.io/GitBestPractices/</a> from this <a href="https://github.com/SethRobertson/GitBestPractices" target="_blank" rel="noopener noreferrer">repo</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initial-file">Initial file<a class="hash-link" href="#initial-file" title="Direct link to heading">​</a></h2><p>I downloaded it from the repo's <code>gh-pages</code> <a href="https://raw.githubusercontent.com/SethRobertson/GitBestPractices/gh-pages/index.md" target="_blank" rel="noopener noreferrer">branch</a> and saved as <code>git-best-initial.md</code>.</p><p>After grabbing via Web Clipper (Chrome browser plugin), this file needed to be normalized. The <strong>Table of Content</strong> (TOC) links in this file do not work correctly, and some code blocks look ugly.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="normalize-with-sed--regular-expressions">Normalize with <code>sed</code> &amp; Regular Expressions<a class="hash-link" href="#normalize-with-sed--regular-expressions" title="Direct link to heading">​</a></h2><p>Initially I was processing the file along with the TOC:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> git-best-initial.md </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">'s/ \/&gt;/&gt;&lt;\/a&gt;/g'</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">'s/\* \(\w.*$\)/\* **\1**/g'</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">'s/^    //g'</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">'s/^### /### \&amp;emsp; /g'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">less</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But then I deleted the TOC because it is automatically generated by Docusaurus (from the h2 &amp; h3 headers) and simplified the code a bit:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> git-best-initial.md </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">'s/\*   \(.*$\)/\* **\1**/g'</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">'s/^### /### \&amp;emsp; /g'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> result.md</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resulting-file">Resulting file<a class="hash-link" href="#resulting-file" title="Direct link to heading">​</a></h2><p>Finally I manually edited the resulting file and got this: <a href="/hm/docs/workplace/git/git-best-practicies">Git Best Practices</a></p>]]></content>
        <author>
            <name>papa31</name>
            <uri>https://github.com/papa31</uri>
        </author>
        <category label="sed" term="sed"/>
        <category label="regex" term="regex"/>
        <category label="web clipper" term="web clipper"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[ Git Best Practices: Commit Often, Perfect Later, Publish Once]]></title>
        <id>/2012/01/13/git-best-practicies</id>
        <link href="https://papa31.github.io/hm/blog/2012/01/13/git-best-practicies"/>
        <updated>2012-01-13T14:37:46.000Z</updated>
        <summary type="html"><![CDATA[Best Practices vary from environment to environment, and there is no One True Answer, but still, this represents a consensus from #git and in some cases helps you frame the discussion for the generation of your very own best practices.]]></summary>
        <content type="html"><![CDATA[<p>Best Practices vary from environment to environment, and there is no One True Answer, but still, this represents a consensus from #git and in some cases helps you frame the discussion for the generation of your very own best practices.</p><p>source: <a href="http://sethrobertson.github.io/GitBestPractices/" target="_blank" rel="noopener noreferrer">http://sethrobertson.github.io/GitBestPractices/</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-read-about-git">Do read about git<a class="hash-link" href="#do-read-about-git" title="Direct link to heading">​</a></h2><p>Knowing where to look is half the battle. I strongly urge everyone to read (and support) the Pro Git book. The other resources are highly recommended by various people as well.</p><ul><li><a href="http://git-scm.com/book/" target="_blank" rel="noopener noreferrer">Pro Git</a></li><li><a href="http://eagain.net/articles/git-for-computer-scientists/" target="_blank" rel="noopener noreferrer">Git for Computer Scientists</a> and a <a href="http://sitaramc.github.com/gcs/" target="_blank" rel="noopener noreferrer">different/updated version</a></li><li><a href="https://jwiegley.github.io/git-from-the-bottom-up/" target="_blank" rel="noopener noreferrer">Git from the Bottom Up</a></li><li><a href="http://tom.preston-werner.com/2009/05/19/the-git-parable.html" target="_blank" rel="noopener noreferrer">The Git Parable</a></li><li><a href="http://git-scm.com/documentation" target="_blank" rel="noopener noreferrer">Other resources</a></li><li><a href="http://git.wiki.kernel.org/" target="_blank" rel="noopener noreferrer">Git wiki</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-commit-early-and-often">Do commit early and often<a class="hash-link" href="#do-commit-early-and-often" title="Direct link to heading">​</a></h2><p>Git only takes full responsibility for your data when you commit. If you fail to commit and then do something poorly thought out, you can run into trouble. Additionally, having periodic checkpoints means that you can understand how you broke something.</p><p>People resist this out of some sense that this is ugly, limits <code>git-bisect</code>ion functionality, is confusing to observers, and might lead to accusations of stupidity. Well, I’m here to tell you that resisting this is ignorant. <em>Commit Early And Often</em>. If, after you are done, you want to pretend to the outside world that your work sprung complete from your mind into the repository in utter perfection with each concept fully thought out and divided into individual concept-commits, well git supports that: see <a href="#on-sausage-making">Sausage Making</a> below. However, don’t let tomorrow’s beauty stop you from performing continuous commits today.</p><p>Personally, I commit early and often and then let the sausage making be seen by all except in the most formal of circumstances (public projects with large numbers of users, developers, or high developer turnover). For a less formal usage, <a href="https://github.com/SethRobertson/GitBestPractices/commits/gh-pages" target="_blank" rel="noopener noreferrer">like say this document</a> I let people see what really happened.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dont-panic">Don’t panic<a class="hash-link" href="#dont-panic" title="Direct link to heading">​</a></h2><p>As long as you have committed your work (or in many cases even added it with <code>git add</code>) your work will not be lost for at least two weeks unless you really work at it (run commands that manually purge it).</p><p>See <a href="http://sethrobertson.github.com/GitFixUm/" target="_blank" rel="noopener noreferrer">on undoing, fixing, or removing commits in git</a> if you want to fix a particular problematic commit or commits, as opposed to attempting to locate lost data.</p><p>When attempting to find your lost commits, first make <em>sure</em> you will not lose any current work. You should commit or stash your current work before performing any recovery efforts that might destroy your current work and perhaps take backups of it (see <a href="#do-backups">Backups</a> below). After finding the commits you can <code>reset</code>, <code>rebase</code>, <code>cherry-pick</code>, <code>merge</code>, or otherwise do what is necessary to get the commit history and work tree you desire.</p><p>There are three places where “lost” changes can be hiding. They might be in the reflog (<code>git log -g</code>), they might be in lost&amp;found (<code>git fsck --unreachable</code>), or they might have been stashed (<code>git stash list</code>).</p><ul><li><p>reflog</p><p>The reflog is where you should look first and by default. It shows you each commit that modified the git repository. You can use it to find the commit name (SHA-1) of the state of the repository before (and after) you typed that command. While you are free to go through the reflog manually (<code>git log -g</code>) or searching it (<code>git log -Sfoo -g</code>), you can also visualize the repository using the following command (Look for dots without children and without green labels):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gitk --all --date-order $(git log -g --pretty=%H)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Lost and found</p><p>Commits or other git data that are no longer reachable through any reference name (branch, tag, etc) are called “dangling” and may be found using <code>fsck</code>. There are legitimate reasons why objects may be dangling through standard actions and normally over 99% of them are entirely uninteresting for this reason.</p><ul><li><p>Dangling Commit</p><p>These are the most likely candidates for finding lost data. A dangling commit is a commit no longer reachable by any branch or tag. This can happen due to resets and rebases and are normal. <code>git show SHA-1</code> will let you inspect them.</p><p>The following command helps you visualize these dangling commits. Look for dots without children and without green labels.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gitk --all --date-order $(git fsck | grep "dangling commit" | awk '{print $3;}')</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Dangling Blob</p><p>A dangling blob is a file that was not attached to a commit. This is often caused by <code>git add</code>s that were superceded before commit or merge conflicts. Inspect these files with</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git show SHA-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Dangling Tree</p><p>A dangling tree is a directory tree of files that was not attached to a commit. These are rarely interesting, and often caused by merge conflicts. Inspect these files with <code>git ls-tree -r SHA-1</code></p></li></ul></li><li><p>Stashes</p><p>Finally, you may have stashed the data instead of committing it and then forgotten about it. You can use the <code>git stash list</code> command or inspect them visually using:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gitk --all --date-order $(git stash list | awk -F: '{print $1};')</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Misplaced</p><p>Another option is that your commit is not lost. Perhaps the commit was just made on a different branch from what you remember. Using <code>git log -Sfoo --all</code> and <code>gitk --all --date-order</code> to try and hunt for your commits on known branches.</p></li><li><p>Look elsewhere</p><p>Finally, you should check your backups, testing copies, ask the other people who have a copy of the repo, and look in other repos.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-backups">Do backups<a class="hash-link" href="#do-backups" title="Direct link to heading">​</a></h2><p>Everyone always recommends taking backups as best practice, and I am going to do the same. However, you already may have a highly redundant distributed ad-hoc backup system in place! This is because essentially every clone is a backup. In many cases, you may want to use a clone for git experiments to perfect your method before trying it for real (this is most useful for <code>git filter-branch</code> and similar commands where your goal is to permanently destroy history without recourse—if you mess it up you may not have recourse). Still, probably you need a more formal system as well.</p><p>Traditional backups are still appropriate, and clones do not save git configurations, the working directory and index, non-standard refs, or dangling objects anyway. A normal tarball, <code>cp</code>, <code>rsync</code>, <code>zip</code>, <code>rar</code> or similar backup copy will be a perfectly fine backup. As long as the underlying filesystem doesn’t reorder git I/O dramatically and there is not a long time delay between the scanning of the directory and the retrieval of the files, the resulting copy of <code>.git</code> should be consistent under almost all circumstances including if taken while git operations are in progress, though you might have to do some recovery–the data will all be present. See also <a href="http://marc.info/?l=git&amp;m=136422341014631&amp;w=2" target="_blank" rel="noopener noreferrer">discussions about custom backup techniques to ensure git consistency</a>–though it does not mention <code>git bundle create ... --all</code> which appears to be the only atomic native git command that can create a backup. When performing git experiments involving items other than normally reachable commits, a copy instead of a clone may be more appropriate.</p><p>However, if you want a “pure git” solution that clones everything in a directory of repos, something like this may be what you need:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /src/backupgit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls -F . | grep / &gt; /tmp/.gitmissing1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh -n git.example.com ls -F /src/git/. | grep / &gt; /tmp/.gitmissing2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">diff /tmp/.gitmissing1 /tmp/.gitmissing2 | egrep '^&gt;' |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while read x f; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    git clone --bare --mirror ssh://git.example.com/src/git/$$f $$f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -f /tmp/.gitmissing1 /tmp/.gitmissing2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for f in */.; do (cd $$f; echo $$f; git fetch); done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dont-change-published-history">Don’t change published history<a class="hash-link" href="#dont-change-published-history" title="Direct link to heading">​</a></h2><p>Once you <code>git push</code> (or in theory someone pulls from your repo, but people who pull from a working repo often deserve what they get) your changes to the authoritative upstream repository or otherwise make the commits or tags publicly visible, you should ideally consider those commits etched in diamond for all eternity. If you later find out that you messed up, make new commits that fix the problems (possibly by revert, possibly by patching, etc).</p><p>Yes, of course git allows you to rewrite public history, but it is problematic for everyone and thus it is just not best practice to do so.</p><p>I’ve said it and I believe it, but…on occasion…if well managed…there are times when changing published history is perhaps a normal course of business. You can plan for particular branches (integration branches especially) or (better) special alternate repositories to be continually rewritten as a matter of course. You see this in git.git with the “pu” branch, for example. Obviously this process must be well controlled and ideally done by one of the most experienced and well trusted engineers (because auditing merges (and worse, non-merge commits) you have essentially seen before is extremely tedious, boring, and error prone and you have lost the protection of git’s cryptographic history validation).</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-choose-a-workflow">Do choose a workflow<a class="hash-link" href="#do-choose-a-workflow" title="Direct link to heading">​</a></h2><p>Some people have called git a tool to create a SCM workflow instead of an SCM tool. There is some truth to this. I am not going to specifically espouse one specific workflow as the best practice for using git since it depends heavily on the size and type of project and the skill of users, developers, and release engineers; however both reflexive avoidance of branches due to stupidity of other SCM systems and reflexive overuse of branches (since branches are actually easy with git) is most likely ignorance. Pick the style that best suits your project and don’t complain about user’s tactical uses of private branches.</p><p>I also implore managers who may be thinking of making specific workflow rules by fiat to remember that not all projects are identical, and rules that work on one project may not work on another. People who blather on about continuous integration, rolling deployment, and entirely independent feature changes that you can pick and choose between independently are absolutely correct, <em>for their project!</em> However, there are many projects and features which are much more complicated and may take longer than a particular sprint/unit-of-time and require multiple people to complete and have complex interdependencies with other features. It is not a sign of stupidity but rather of complexity and, just perhaps, brilliant developers, who can keep it all straight. It can also lead to a market advantage since you can deploy a differentiating feature which your competitors cannot in a short timeframe.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="branch-workflows">Branch workflows<a class="hash-link" href="#branch-workflows" title="Direct link to heading">​</a></h3><p>Answering the following questions helps you choose a branch workflow:</p><ul><li>Where do important phases of development occur?</li><li>How can you identify (and backport) groups of related change?</li><li>Do you have work which often needs to be updated in multiple distinct long-lived branches?</li><li>What happens when emergency patches are required?</li><li>What should a branch for a particular purpose (including user-tactical) be named?</li><li>What is the lifecycle of a branch?</li></ul><p>See the following references for more information on branch workflows.</p><ul><li><a href="http://git-scm.com/book/ch3-4.html" target="_blank" rel="noopener noreferrer">Pro Git branching models</a></li><li><a href="http://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener noreferrer">Git-flow branching model</a> (with <a href="https://github.com/petervanderdoes/gitflow-avh" target="_blank" rel="noopener noreferrer">the associated gitflow tool</a>)</li><li><a href="http://jk.gs/gitworkflows.html" target="_blank" rel="noopener noreferrer">Gitworkflows man page</a></li><li><a href="http://reinh.com/blog/2009/03/02/a-git-workflow-for-agile-teams.html" target="_blank" rel="noopener noreferrer">A Git Workflow for Agile Teams</a></li><li><a href="http://stackoverflow.com/questions/2621610/what-git-branching-models-actually-work" target="_blank" rel="noopener noreferrer">What git branching models actually work</a></li><li><a href="https://web.archive.org/web/20150405004638/http://blogs.remobjects.com/blogs/mh/2011/08/25/p2940" target="_blank" rel="noopener noreferrer">Our New Git Branching Model</a></li><li><a href="http://dymitruk.com/blog/2012/02/05/branch-per-feature/" target="_blank" rel="noopener noreferrer">Branch-per-Feature</a></li><li><a href="http://widgetsandshit.com/teddziuba/2011/12/process.html" target="_blank" rel="noopener noreferrer">Who Needs Process</a></li></ul><p>However, also understand that everyone already has an implicit private branch due to their cloned repository: they can do work locally, do a <code>git pull --rebase</code> when they are done, perform final testing, and then push their work out. If you run into a situation where you might need the benefits of a feature branch before you are done, you can even retroactively commit&amp;branch then optionally reset your primary branch back to @{u}. Once you push you lose that ability.</p><p>Some people have been very successful with just master and $RELEASE branches ($RELEASE branch for QA and polishing, master for features, specific to each released version.) Other people have been very successful with many feature branches, integration branches, QA, and release branches. The faster the release cycle and the more experimental the changes, the more branches will be useful—continuous releases or large refactoring project seem to suggest larger numbers of branches (note the number of branches is the tail, not the dog: more branches will not make you release faster).</p><p>The importance of some of the questions I asked may not be immediately obvious. For example, how does having work which needs to be updated in multiple distinct long-lived branches affect branch workflow? Well, you may want to try to have a “core” branch which these other branches diverge from, and then have your feature/bugfix branches involving these multiple branches come off of the lowest-common-merge-base (LCMB) for these long-lived branches. This way, you make your change (potentially merge your feature branch back into the “core” branch), and then merge the “core” branch back into all of the other long-lived branches. This avoids the dreaded cherry-pick workflow.</p><p>Branch naming conventions are also often overlooked. You must have conventions for naming release branches, integration branches, QA branches, feature branches (if applicable), tactical branches, team branches, user branches, etc. Also, if you use share repositories with other projects/groups, you probably will need a way to disambiguate your branches from their branches. Don’t be afraid of “/” in the branch name when appropriate (but do be afraid of using a remote’s name as a directory component of a branch name, or correspondingly naming a remote after a branch name or directory component).</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="distributed-workflows">Distributed workflows<a class="hash-link" href="#distributed-workflows" title="Direct link to heading">​</a></h3><p>Answering the following questions helps you choose a distributed workflow:</p><ul><li>Who is allowed to publish to the master repository?</li><li>What is the process between a developer finishing coding and the code being released to the end-user?</li><li>Are there distinct groups that work on distinct sections of the codebase and only integrate at epochs? (Outsourcing)</li><li>Is everyone inside the same administrative domain?</li></ul><p>See the following references for more information on distributed workflows.</p><ul><li><a href="https://web.archive.org/web/20160314124550/http://git-scm.com/book/ch5-1.html" target="_blank" rel="noopener noreferrer">Pro Git distributed models</a></li><li><a href="http://jk.gs/gitworkflows.html" target="_blank" rel="noopener noreferrer">Gitworkflows man page</a></li></ul><p>Cathedrals (traditional corporate development models) often want to have (or to pretend to have) the one true centralized repository. Bazaars (linux, and the Github-promoted workflow) often want to have many repositories with some method to notify a higher authority that you have work to integrate (pull requests).</p><p>However, even if you go for, say, a traditional corporate centralized development model, don’t forbid self-organized teams to create their own repositories for their own tactical reasons. Even having to fill out a justification form is probably too cumbersome.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="release-tagging">Release tagging<a class="hash-link" href="#release-tagging" title="Direct link to heading">​</a></h3><p>Choosing your release workflow (how to get the code to the customer) is another important decision. You should have already considered most of the issues when going over the branching and distributed workflow above, but less obviously, it may affect how and when you perform tagging, and specifically the name of the tag you use.</p><p>At first glance, it is a no-brainer. When you release something you tag something, and of course I <em>highly</em> recommend this. However, tags should be treated as immutable once you push. Well, that only makes sense, you might think to yourself, but consider this: five minutes after everyone has signed off on the 2.0 release, it has been tagged <code>Frobber_Release_2.0</code> and pushed, but before any customer has seen the resulting product someone comes running in “OMFG, the foobar is broken when you frobnoz the baz.” What do you do? Do you skip release <code>2.0</code> and tag <code>2.0.1</code>? Do you do a take-back and go to every repo of every developer and delete the <code>2.0</code> tag?</p><p>Two ideas for your consideration. Instead of a release tag, use a release branch with the marketing name (and then stop committing to that branch after release, disabling write access to it in <a href="https://github.com/sitaramc/gitolite" target="_blank" rel="noopener noreferrer">gitolite</a> or something). Another idea, use an internal tag name that is not directly derived from the version number that marketing wishes to declare to the outside world. The problem with the branch idea is that if you cannot (or forget to) disable write access then someone might accidentally commit to that branch, leading to confusion about what was actually released to the customer. The problem with the tag idea is that you need to remember what the final shipped tag name is, independent from the release name. However, if you use both techniques, they cover for each other’s disadvantages. In any case, using either technique will be better than using marketing-version tags (as I know from experience).</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="security-model">Security model<a class="hash-link" href="#security-model" title="Direct link to heading">​</a></h3><p>You might ask why security is not a top level item and is near the end of the workflow section. Well that is because in an ideal world your security should support your workflow not be an impediment to it.</p><p>For instance, did you decide certain branches should only have certain people being allowed to access it? Did you decide that certain repositories should only have certain people able to access/write to them?</p><p>While git allows users to set up many different types of access control, access methods, and the like; the best for most deployments might be to set up a centralized git master repository with a <a href="https://github.com/sitaramc/gitolite" target="_blank" rel="noopener noreferrer">gitolite</a> manager to provide fine grained access control with ssh based authentication and encryption.</p><p>Of course, security is more than access control. It is also assurance that what you release is what was written by the people it should be written by, and what was tested. Git provides you this for free, but certain formal users may wish to use signed tags. Watch for signed pushes in a future version of git.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-divide-work-into-repositories">Do divide work into repositories<a class="hash-link" href="#do-divide-work-into-repositories" title="Direct link to heading">​</a></h2><p>Repositories sometimes get used to store things that they should not, simply because they were there. Try to avoid doing so.</p><ul><li><p>One conceptual group per repository</p><p>Does this mean one per product, program, library, class? Only you can say. However, dividing stuff up later is annoying and leads to rewriting public history or duplicative or missing history. Dividing it up correctly beforehand is much better.</p></li><li><p>Read access control is at the repo level</p><p>If someone has access to a repository, they have access to the entire repo, all branches, all history, everything. If you need to compartmentalize read access, separate the compartments into different repositories.</p></li><li><p>Separate repositories for files that might be needed by multiple projects</p><p>This promotes sharing and code reuse, and is highly recommended.</p></li><li><p>Separate repositories for large binary files</p><p>Git doesn’t handle large binary files ideally yet and large repositories can be slow. If you must commit them, separating them out into their own repository can make things more efficient.</p></li><li><p>Separate repositories for planned continual history rewrites</p><p>You will note that I have already recommended against rewriting public history. Well, there are times when doing that just makes sense. One example might be a cache of pre-built binaries so that most people don’t need to rebuild them. Yet older versions of this cache (or at least older versions not at tag boundaries) may be entirely useless and so you want to pretend they never happened to save space. You can rebase, filter, or squash these unwanted commits away, but this is rewriting history and can cause problem. So if you really must do so, isolate these files into a repository so that at least everything else will not be affected.</p></li><li><p>Group concepts into a superproject</p><p>Once you have divided, now you need to conquer. You can assemble multiple individual repositories into a superproject to group all of the concepts together to create your unified work.</p><p>There are two main methods of doing this.</p><ul><li><p><code>git-submodules</code></p><p>Git submodules is the native git approach, which provides a strong binding between the superproject repository and the subproject repositories for every commit. This leads to a baroque and annoying process for updating the subproject. However, if you do not control the subproject (solvable by “forking”) or like to perform blame-based history archeology where you want to find out the absolute correspondence between the different projects at every commit, it is very useful.</p></li><li><p><code>gitslave</code></p><p><a href="http://gitslave.sf.net" target="_blank" rel="noopener noreferrer">gitslave</a> is a useful tool to add a subsidiary git repositories to a git superproject when you control and develop on the subprojects at more or less the same time as the superproject, and furthermore when you typically want to tag, branch, push, pull, etc all repositories at the same time. There is no strict correspondence between superproject and subproject repositories except at tag boundaries (though if you need to look back into history you can usually guess pretty well and in any case this is rarely needed).</p></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-make-useful-commit-messages">Do make useful commit messages<a class="hash-link" href="#do-make-useful-commit-messages" title="Direct link to heading">​</a></h2><p>Creating insightful and descriptive commit messages is one of the best things you can do for others who use the repository. It lets people quickly understand changes without having to read code. When doing history archeology to answer some question, good commit messages likewise become very important.</p><p>The normal git rule of using the first line to provide a short (50-72 character) summary of the change is also very good. Looking at the output of <code>gitk</code> or <code>git log --oneline</code> might help you understand why.</p><p>Also see <a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html" target="_blank" rel="noopener noreferrer">A Note About Git Commit Messages</a> for even more good ideas.</p><p>While this relates to the later topic of <a href="#do-integrate-with-external-tools">integration with external tools</a>, including bug/issue/request tracking numbers in your commit messages provides a great deal of associated information to people trying to understand what is going on. You should also enforce your standards on commit messages, when possible, through hooks. See <a href="#do-enforce-standards">Enforcing standards</a> below.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="on-sausage-making">On Sausage Making<a class="hash-link" href="#on-sausage-making" title="Direct link to heading">​</a></h2><p>Some people like to hide the sausage making <a href="#footnotes">¹</a>, or in other words pretend to the outside world that their commits sprung full-formed in utter perfection into their git repository. Certain large public projects demand this, others demand smushing all work into one large commit, and still others do not care.</p><p>A good reason to hide the sausage making is if you feel you may be cherry-picking commits a lot (though this too is often a sign of bad workflow). Having one or a small number of commits to pick is much easier than having to find one commit here, one there, and half of this other one. The latter approach makes your problem much much harder and typically will lead to merge conflicts when the donor branch is finally merged in.</p><p>Another good reason is to ensure each commit compiles and/or passes regression tests, and represents a different easily understood concepts. The former allows <code>git-bisect</code> to choose any commit and have a good chance of that commit doing something useful, and the latter allows for easy change/commit/code review, understanding, archeology, and cherry-picking. When reviewing commits, for example the reviewer might see something suspicious in a commit and then have to spend time tracking down their suspicions and write them up, only to discover five commits later that the original developer subsequently found and fixed the problem, wasting the reviewer’s time (reviewing the entire patch series as a diff fixes this problem but greatly adds complexity as multiple concepts get muddled). By cleaning up patches into single, logical changes that build on one another, and which don’t individually regress (i.e., they are always moving towards some desirable common endpoint), the author is writing a chronological story not of what happened, but what <em>should</em> happen, with the intent that the audience (i.e., reviewers) are convinced that the change is the right thing to do. Proponents claim it is all about leaving a history others can later use to understand <em>why</em> the code became the way it is now, to make it less likely for others to break it.</p><p>The downside to <em>hiding the sausage</em> making is the added time it takes to perfect the administrative parts of the developers job. It is time taken away from getting code working; time solely dedicated to either administrative beauty or enhancing the ability to perform the blame-based (or ego-full) development methodology.</p><p>If you think about it, movies are made this way. Scenes are shot out of temporal order, multiple times, and different bits are picked from this camera and that camera. Without examining the analogy too closely, this is similar to how different git commits might be viewed. Once you have everything in the “can” (repository) you go back and in post-production, you edit and splice everything together to form individual cuts and scenes, sometimes perhaps even doing some digital editing of the resulting product.</p><p><code>git rebase -i</code>, <code>git add -p</code>, and <code>git reset -p</code> can fix commits up in post-production by splitting different concepts, merging fixes to older commits, etc. See <a href="http://sethrobertson.github.com/GitPostProduction/" target="_blank" rel="noopener noreferrer">Post-Production Editing using Git</a> also <a href="http://repo.or.cz/w/topgit.git" target="_blank" rel="noopener noreferrer">TopGit</a> and <a href="https://stacked-git.github.io/" target="_blank" rel="noopener noreferrer">StGit</a>.</p><p>Be sure you do all of this work <em>before</em> doing any non-squashed merges (not rebases: merges) and <em>before</em> pushing. Your work becomes much more complex and/or impossible afterwards.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="footnotes">Footnotes:<a class="hash-link" href="#footnotes" title="Direct link to heading">​</a></h4><p><a href="#">¹</a> The process of developing software, similar to the process of making sausage, is a messy messy business <a href="#footnotes">²</a> all sorts of stuff happens in the process of developing software. Bugs are inserted into the code, uncovered, patched over. The end result may be a tasty program, but anyone looking at the process of how it was created (through inspection of the commits) may end up with a sour taste in their mouth. If you hide the sausage making, you can create a beautiful looking history where each step looks as delicious as the end-product. <a href="#on-sausage-making">Back to footnote reference</a></p><p><a href="#">²</a> If you do not understand why someone would want to hide the sausage making, and you enjoy eating sausage, never, ever, watch sausages being made, read <a href="http://en.wikipedia.org/wiki/The_Jungle" target="_blank" rel="noopener noreferrer">“The Jungle”</a>, or otherwise try to expose yourself to any part of the sausage making process. You will lead a much tastier (and perhaps shorter) life in your blissful ignorance.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-keep-up-to-date">Do keep up to date<a class="hash-link" href="#do-keep-up-to-date" title="Direct link to heading">​</a></h2><p>This section has some overlap with workflow. Exactly how and when you update your branches and repositories is very much associated with the desired workflow. Also I will note that not everyone agrees with these ideas (but they should!)</p><ul><li><p>Pulling with <code>--rebase</code></p><p>Whenever I pull, under most circumstances I <code>git pull --rebase</code>. This is because I like to see a linear history (my commit came after all commits that were pushed before it, instead of being developed in parallel). It makes history visualization much simpler and <code>git bisect</code> easier to see and understand.</p><p>A specific circumstance in which you should avoid using <code>git pull --rebase</code> is if you merged since your last push. You might want to <code>git fetch; git rebase -p @{u}</code> (and check to make sure the merge was recreated properly) or do a normal merge in that circumstance.</p><p>Another specific circumstance is if you are pulling from a non-authoritative repository which is not fully up to date with respect to your authoritative upstream. A rebase in this circumstance could cause the published history to be rewritten, <a href="#dont-change-published-history">which would be bad</a>.</p><p>Some people argue against this because the non-final commits may lose whatever testing those non-final commits might have had since the deltas would be applied to a new base. This in turn might make git-bisect’s job harder since some commits might refer to broken trees, but really this is only relevant to people who want to hide the sausage making. Of course to <em>really</em> hide the sausage making you should still rebase and then test each intermediate commit to ensure it compiles and passes your regression tests (you do have regression tests, don’t you?) so that a future bisector will have some strong hope that the commit will be usable. After all, that future bisector might be you.</p><p>Other people argue against this (especially in highly decentralized environments) because doing a merge explicitly records who performed the merge, which provides someone to blame for inadequate testing if two histories were not combined properly (as opposed to the hidden history with implicit blame of rebase).</p><p>Still others argue that you are unable to automatically discover when someone else has <a href="#dont-change-published-history">rewritten public history</a> if you use <code>git pull --rebase</code> normally, so someone might have hidden something malicious in an older (presumably already reviewed) commit. If this is of concern, you can still use rebase, but you would have to <code>git fetch</code> first and look for “forced update” in that output or in the reflog for the remote branches.</p><p>You can make this the default with the <code>branch.&lt;name&gt;.rebase</code> configuration option (and more practically, by the “branch.autosetuprebase” configuration option). See <a href="http://jk.gs/git-config.html" target="_blank" rel="noopener noreferrer">man git-config</a>.</p></li><li><p>Rebasing (when possible)</p><p>Whenever I have a private branch that I want to update, I use rebase (for the same reasons as above). History is clean and simple. However, if you share this branch with other people, rebasing is rewriting public history and should/must be avoided. You may only rebase commits that no-one else has seen (which is why <code>git pull --rebase</code> is safe).</p></li><li><p>Merging without speeding</p><p><code>git merge</code> has the concept of fast-forwarding, or realizing that the code you are trying to merge in is identical to the result of the code after the merge. Thus instead of doing work, creating new commits, etc, git simply changes the branch pointers (fast forwards them) and calls it good.</p><p>This is good when doing <code>git pull</code> but not so good when doing <code>git merge</code> with a non-@{u} (upstream) branch. The reason this is not good is because it loses information. Specifically it loses track of which branch is the first parent and which is not. If you don’t ever want to look back into history, then it does not matter. However, if you want to know the branch on which a commit was originally made, using fast-forward makes that question impossible to answer. If you try, git will pick one branch or the other (the first parent or second parent) as the one on which both branches’ activities were performed and the other (original) parent’s branch will be anonymous. There are typically worse things in the world, but you lose information that is not recoverable in any other way by a repository observer and in my book that is bad. Use <code>git merge --no-ff</code> instead.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-periodic-maintenance">Do periodic maintenance<a class="hash-link" href="#do-periodic-maintenance" title="Direct link to heading">​</a></h2><p>The first two items should be run on your server repositories as well as your user repositories.</p><ul><li><p>Validate your repo is sane (<code>git fsck</code>)</p><p>You need not check dangling objects unless you are missing something</p></li><li><p>Compact your repo (<code>git gc</code> and <code>git gc --aggressive</code>)</p><p>This will removed outdated dangling objects (after the two+ week grace period). It will also compress any loose objects git has added since your last gc. git will run a minimal gc automatically after certain commands, but doing a manual gc often (and “–aggressive” every few hundred changesets) will save space and speed git operations.</p></li><li><p>Prune your remote tracking branches (<code>git remote update --prune</code>)</p><p>This will get rid of any branches that were deleted upstream since you cloned/pruned. It normally isn’t a major problem one way or another, but it might lead to confusion.</p></li><li><p>Check your stash for forgotten work (<code>git stash list</code>)</p><p>If you don’t do it very often, the context for the stashed work will be forgotten when you finally do stumble on it, creating confusion.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-enforce-standards">Do enforce standards<a class="hash-link" href="#do-enforce-standards" title="Direct link to heading">​</a></h2><p>Having standards is a best practice and will improve the quality of your commits, code-base, and probably enhance git-bisect and archeology functionality, but what is the use of a standard if people ignore them? Checks could involve regression tests, compilation tests, syntax/lint checkers, commit message analysis, etc. Of course, there are times when standards get in the way of doing work, so provide some method to temporarily disable the checks when appropriate.</p><p>Traditionally, and in some people’s views ideally, you would enforce the checks on the client side in a pre-commit hook (perhaps have a directory of standard hooks in your repo and might ask users to install them) but since users will often not install said hooks, you also need to enforce the standards on the server side. Additionally, if you follow the commit-early-and-often-and-perfect-it-later philosophy that is promoted in this document, initial commits may <em>not</em> satisfy the hooks.</p><p>Enforcing standards in a update hook on the server allows you to reject commits that don’t follow the standards. You can also chide the user for not using the standard client-side hook to begin with (if you recommend that approach).</p><p>See <a href="https://web.archive.org/web/20171023223424/https://puppet.com/blog/git-workflow-and-puppet-environments" target="_blank" rel="noopener noreferrer">Puppet Version Control</a> for an example for a “Git Update Hook” and “Git Pre-Commit Hook” and <a href="https://puppet.com/blog/how-to-use-git-commit-hooks-puppet-enterprise/" target="_blank" rel="noopener noreferrer">“Git Commit hook”</a> that enforces certain standards. Note that the update hook is examining files individually instead of providing whole-repository testing. Whether individual files can be tested in isolation for your standards or whether you need the whole repository (for instance, any language where one file can reference or include another might need whole repository checks) is of course a personal choice. The referenced examples are useful for ideas, anyway.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-use-useful-tools">Do use useful tools<a class="hash-link" href="#do-use-useful-tools" title="Direct link to heading">​</a></h2><p>More than useful, use of these tools may help you form a best practice!</p><ul><li><p><a href="https://github.com/sitaramc/gitolite" target="_blank" rel="noopener noreferrer">gitolite</a></p><p>We already mentioned gitolite above, but it forms a great git server intermediary for access control.</p></li><li><p><a href="http://gitslave.sf.net" target="_blank" rel="noopener noreferrer">gitslave</a></p><p>We already mentioned gitslave above, but it forms a great alternative to git-submodules when forming superprojects out of repositories you control.</p></li><li><p><a href="http://code.google.com/p/gerrit/" target="_blank" rel="noopener noreferrer">gerrit</a></p><p>To quote the website: Gerrit is a web based code review system, facilitating online code reviews for projects using the Git version control system.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="do-integrate-with-external-tools">Do integrate with external tools<a class="hash-link" href="#do-integrate-with-external-tools" title="Direct link to heading">​</a></h2><p>Increasing communication and decreasing friction and roadblocks to your developer’s work will have many advantages. If you make something easy, convenient, and useful to do, people might just well do it.</p><ul><li><p>Web views</p><p>This is pretty standard stuff, but still a best practice. Setting up a tool like <a href="http://jk.gs/gitweb.html" target="_blank" rel="noopener noreferrer">gitweb</a> (or <a href="https://web.archive.org/web/20130914063137/http://hjemli.net/git/cgit/" target="_blank" rel="noopener noreferrer">cgit</a> or whatever) to allow URL reference to commits (among other visualization interfaces it provides) gives people a great way to refer to commits in email and conversations. If someone can click on a link vs having to fire up git and pull down the latest changes and start up some visualization tool they are much more likely to help you.</p></li><li><p>Bug tracking</p><p>Industry best practice suggests that you should have a bug tracking system. Hopefully you do. Well, I’m here to tell you that integrating your bug tracking system with git makes the two systems one thousand times more effective. Specifically, come up with a standard for tagging commits with bug numbers (eg. “Bug 1234: Adjust the frobnoz down by .5”) and then have a receive hook on the upstream repo that automatically appends that commit information to the ticket. If you really love your developers, develop syntax that lets them close the ticket as part of the commit message (eg. “Bug 1235r: Adjust the frobnoz up by .25”).</p><p>While it probably will be a side-effect of the git integration, ensuring that your ticketing system has an email interface for ticket creation and so that replies to ticket email get stored in the ticket are all very important for making a ticketing system useful and convenient to use.</p><p>The easier a system is for people to use, the more likely they will use it. Being able to see the context in which a commit was made (or conversely, being able to find the commit that solved a problem) is incredibly useful. When you send out your commit announcements, make sure to hyperlink the bug tracker in the commit message, and likewise in the tracker message, hyperlink to the web view of the commit.</p><p>Notes: some commits can apply to multiple bugs. Generate a standard and code to handle this standard. Also, if you do hours tracking, you may want a syntax to handle that. (eg. “Bug 12346w/5: Bug 12347rw/3: Adjust the frobnoz up by .3”)</p></li><li><p>IRC/chat rooms/bots</p><p>Having an IRC server with some standard channels to discuss issues and problems provides a great benefit both tactically and strategically (it helps teach both the questioner and the answerer). Adding a robot in those chat room to provide assistance adds significant value. When someone talks about Bug 1234, the bot can provide a hyperlink to that ticket. When someone pushes some commits or adds a bug, it could announce those facts. All sorts of things are possible (RFC lookups, MAC vendor lookups, Eliza psychoanalysis, etc) but there is a fine line between usefulness and overwhelming noise.</p><p>If you use github, github provides an “IRC” “Service Hook” that lets you get git announcements for free. Said robot will not provide any additional value added services you might want. <a href="https://web.archive.org/web/20110827172758/http://cia.vc/" target="_blank" rel="noopener noreferrer">CIA</a> is another packaged commit announcement system and of course many IRC robot frameworks can be found with simple web searches.</p></li><li><p>Wikis</p><p>Having convenient syntax to link to bugs in your bug tracking system and branches/tags/commits in your gitweb again makes all three systems more useful. Increased synergy through integration!</p></li><li><p>Other services</p><p>While I have your attention, there are a few other services which you should probably bring up as a best practice for your organization (but which have only limited applicability to git):</p><ul><li><p>Pastebin-like private text paste service</p><p>The free internet pastebin services are great and very useful, but you cannot paste proprietary information into them. So bring one of those services up yourself. Ensure that you have a portable application interface to this service to reduce friction (<code>git status | mypastebin</code>).</p></li><li><p>Imagebin-like private image paste service</p><p>Likewise, bringing up a image paste service and associated client has the same justification and the same benefit. While the obvious use is for screenshots, other uses will become apparent. Just do it.</p></li><li><p>URL shortener</p><p>The justification for a URL shortener is a little weaker than text/image paste services, but it still exists. Since it is a trivial service, you might as well bring it up for proprietary URLs.</p></li><li><p>Search</p><p>Providing a search service for both the web services you provide, but also for git repositories and any other collections of documents or data you might have lying around will save your users hours of searching. Don’t forget to enable locate (for Unix/Linux systems) while you are at it.</p></li><li><p>Mailing lists</p><p>Creating mailing lists with searchable archives for users to communicate improves transparency and information flow. Ideally in many cases the mailing lists should be self-service and have digest options. Of course git commits, and bug announcements, and bug updates should all go to such mailing lists.</p></li><li><p>Role aliases</p><p>Instead of saying, send mail to Bob for your sales questions and Alice for your IT problems, you should have well defined and findable role aliases so that vacations, personnel changes, and related issues do not have to affect people’s communication behaviors. Of course, in many cases, you may want to have these roles feed into your ticketing system for tracking instead of depending on human management of private mail queues.</p></li><li><p>VNC-sharing of server consoles</p><p>When you have servers (machines without humans in front of them all of the time), make sure that the console is available virtually. Getting a bog-standard KVM to mediate access to the consoles is good, but what you really need to do is get a VNC enabled KVM or passthrough device (like the AdderLink IPEPS and friends) attached to the KVM so that you can have remote access to the servers. Why VNC and not remote desktop or some java console? Portability and flexibility. If you need multiple users having simultaneous access to the servers, you can get a multi-console multi-server KVM. Remember, if you have to get up out of your seat, you have failed.</p><p>Having a VNC console access allows users to more easily consult with each other on problems.</p></li><li><p>VMs (with VNC sharing) for most services</p><p>Instead of having dedicated hardware, create VMs for your critical services. The VM images then can be more easily backed up, moved around, and have less wasted resources. Of course, don’t forget the admonition to have a portable multiuser console system like VNC for console access. Personally, I use KVM-QEMU for my virtualization needs. It is free and works great.</p><p>Having a VNC console access allows users to more easily consult with each other on problems.</p></li><li><p>Audio conference</p><p>An audio conferencing service provides another low-friction method of increasing communication, which speeds development. My sources tell me you can get a plugin for asterisk that will give you free conference services. Since you are of course using VOIP for your communication, you then should have essentially free internal conferencing.</p></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="miscellaneous-dos">Miscellaneous “Do”s<a class="hash-link" href="#miscellaneous-dos" title="Direct link to heading">​</a></h2><p>These are random best practices that are too minor or disconnected to go in any other section.</p><ul><li><p>Copy/move a file in a different commit from any changes to it</p><p>If you care about git properly displaying the fact that you moved a file, you should copy or move the file in a different commit from any changes you need to immediately make to that file. This is because git does not record <code>git mv</code> any different from a delete and an add, and because <code>git cp</code> doesn’t even exist. Git’s output commands are the ones that interpret the data as a move or copy. See the -C and -M options to <code>git log</code> (and similar commands).</p></li><li><p>(Almost) Always name your stashes</p><p>If you don’t provide a name when stashing, git generates one automatically based on the previous commit. While this tells you the branch where a stash was made, it gives you no idea what is in it. Unless you plan to pop a stash in the next few minutes, you should always give it a name with <code>git stash save XXX</code> rather than the shorter default <code>git stash</code> (which should be reserved for very temporary uses). This way you’ll have some idea what a stash is about when you are looking at it months later.</p></li><li><p>Protect your bare/server repos against history rewriting</p><p>If you initialize a bare git repository with “–shared” it will automatically get the git-config “receive.denyNonFastForwards” set to true. You should ensure that this is set just in case you did something weird during initialization. Furthermore, you should also set “receive.denyDeletes” so that people who are trying to rewrite history cannot simply delete the branch and then recreate it. Best practice is for there to be a speedbump any time someone is trying to delete or rewrite history, since it is such a bad idea.</p></li><li><p>Experiment!</p><p>When you have an idea or are not sure what something does, try it out! Ideally try it out in a clone or copy so that recovery is trivial. While you can normally completely recover from any git experiment involving data that has been fully committed, perhaps you have not committed yet or perhaps you are not sure whether something falls in the category of “trying hard” to destroy history.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="miscellaneous-donts">Miscellaneous “don’t”s<a class="hash-link" href="#miscellaneous-donts" title="Direct link to heading">​</a></h2><p>In this list of things to <em>not</em> do, it is important to remember that there are legitimate reasons to do all of these. However, you should not attempt any of these things without understanding the potential negative effects of each and why they might be in a best practices “Don’t” list.</p><p><em>DO NOT</em></p><ul><li><p>commit anything that can be regenerated from other things that were committed.</p><p>Things that can be regenerated include binaries, object files, jars, <code>.class</code>, flex/yacc generated code, etc. Really the only place there is room for disagreement about this is if something might take hours to regenerate (rendered images, e.g., but see <a href="#do-divide-work-into-repositories">Dividing work into repositories</a> for more best practices about this) or autoconf generated files (so people can configure and compile without autotools installed).</p></li><li><p>commit configuration files</p><p>Specifically configuration files that might change from environment to environment or for any reasons. See <a href="https://gist.github.com/1423106" target="_blank" rel="noopener noreferrer">Information about local versions of configuration files</a></p></li><li><p>use git as a web deployment tool</p><p>Yes it can be done in a sufficiently simple/non-critical environment with something like <a href="http://toroid.org/ams/git-website-howto" target="_blank" rel="noopener noreferrer">Abhijit Menon-Sen’s document on using git to manage a web site</a> to help, though there are <a href="https://gist.github.com/1714235" target="_blank" rel="noopener noreferrer">other</a> <a href="http://joemaller.com/990/a-web-focused-git-workflow/" target="_blank" rel="noopener noreferrer">examples</a>. However, this does not give you atomic updates, synchronized db updates, or other accouterments of an industrial deployment system.</p></li><li><p>commit large binary files (when possible)</p><p>Large is currently relative to the amount of free RAM you have. Remember that not everyone may be using the same memory configuration you are. Support for large files is an active git topic, so watch for changes.</p><p>After running a <code>git gc</code> you should be able to find the largest objects by running:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git verify-pack -v .git/objects/pack/pack-*.idx |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grep blob | sort -k3nr | head |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while read s x b x; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  git rev-list --all --objects | grep $s |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  awk '{print "'"$b"'",$0;}';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Consider using <a href="http://git-annex.branchable.com/" target="_blank" rel="noopener noreferrer">Git annex</a> or <a href="https://github.com/alebedev/git-media" target="_blank" rel="noopener noreferrer">Git media</a> if you plan on having large binary files and your workflow allows.</p></li><li><p>create very large repositories (when possible)</p><p>Git can be slow in the face of large repositories. The definition of “large” will depend on your RAM size, I/O speed, expectations, etc. However, having 100K-200K files in a repository may slow common operations due to stat system call speeds (especially on Windows) and having many large (esp. binary) files (see above) can slow many operations.</p><p>If you start having pack files (in <code>.git/objects/pack</code>) which are larger than 1GB, you might also want to consider creating a <code>.keep</code> file (right beside the <code>.idx</code> and <code>.pack</code> files) for a large pack which will prevent them from being repacked during gc and repack operations.</p><p>If you find yourself running into memory pressure when you are packing commits (usually <code>git gc [--aggressive]</code>), there are git-config options that can help. <code>pack.threads=1</code> <code>pack.deltaCacheSize=1</code> <code>pack.windowMemory=512m</code> all of which trade memory for CPU time. Other likely ones exist. My gut tells me that sizing (“deltaCacheSize” + “windowMemory” + min(“core.bigFileThreshold<!-- -->[<!-- -->512m<!-- -->]<!-- -->”, TheSizeOfTheLargestObject)) <!-- -->*<!-- --> “threads” to be around <em>half</em> the amount of RAM you can dedicate to running <code>git gc</code> will optimize your packing experience, but I will be the first to admit that made up that formula based on a very few samples and it could be drastically wrong.</p><p>Support for large repositories is an active git topic, so watch for changes.</p></li><li><p>use <code>reset</code> (<code>--hard | --merge</code>) without committing/stashing</p><p>This can often overwrite the working directory without hope of recourse.</p></li><li><p>use <code>checkout</code> in file mode</p><p>This will overwrite some (or potentially all with <code>.</code>) of the working directory without hope of recourse.</p></li><li><p>use <code>git clean</code> without previously running with “<code>-n</code>” first</p><p>This will delete untracked files without hope of recourse.</p></li><li><p>prune the reflog</p><p>This is removing your safety belt.</p></li><li><p>expire “now”</p><p>This is cutting your safety belt.</p></li><li><p>use <code>git repack -ad</code></p><p>Unreferenced objects in a newly redundant pack will get deleted which cuts your safety belt. Instead use <code>git gc</code> or at least <code>git repack -Ad</code></p></li><li><p>use a branch argument to <code>git pull</code> or <code>git fetch</code></p><p>No doubt there is a good use case for, say, <code>git pull origin master</code> or whatever, but I have yet to understand it. What I <em>do</em> understand is that every time I have seen someone use it, it has ended in tears.</p></li><li><p>use git as a generic filesystem backup tool</p><p>Git was not written as a dedicated backup tool, and such tools do exist. Yes people have done it successfully, but usually with lots of scripts or modifications around it. One successful example of integration/modifications is <a href="https://github.com/bup/bup" target="_blank" rel="noopener noreferrer">bup</a>.</p></li><li><p>rewrite public history</p><p>See <a href="#dont-change-published-history">section about this topic</a>. It bears repeating, though.</p></li><li><p>change where a tag points</p><p>This is another way to <a href="#dont-change-published-history">rewrite public history</a>.</p></li><li><p>use <code>git-filter-branch</code></p><p>Still another way to <a href="#dont-change-published-history">rewrite public history</a>.</p><p>However, if you are going to use git-filter-branch, make sure you end your command with <code> –tag-name-filter cat – –all</code> unless you are really really sure you know what you are doing.</p></li><li><p>create <code>--orphan</code> branches</p><p>With the notable exception of gh-pages (which is a hack github uses for convenience, not an expression of general good style practice), any situation where creating an orphan branch seems like a reasonable solution you probably should just create a new repository. If the new branch cannot really be thought of as being related to the other branches in your repository so that merging between the two really has any conceptual relevance, then the concept is probably far enough apart to warrant its own repository.</p></li><li><p>use <code>clone --shared</code> or <code>--reference</code></p><p>This can lead to problems for non-normal git actions, or if the other repository is deleted/moved. See <a href="http://jk.gs/gitworkflows.html" target="_blank" rel="noopener noreferrer">git-clone manual page</a>.</p></li><li><p>use <code>git-grafts</code></p><p>This is deprecated in favor of <code>git-replace</code>.</p></li><li><p>use <code>git-replace</code></p><p>But don’t use <code>git-replace</code> either.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="disclaimer">Disclaimer<a class="hash-link" href="#disclaimer" title="Direct link to heading">​</a></h2><p>Information is not promised or guaranteed to be correct, current, or complete, and may be out of date and may contain technical inaccuracies or typographical errors. Any reliance on this material is at your own risk. No one assumes any responsibility (and everyone expressly disclaims responsibility) for updates to keep information current or to ensure the accuracy or completeness of any posted information. Accordingly, you should confirm the accuracy and completeness of all posted information before making any decision related to any and all matters described.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="copyright">Copyright<a class="hash-link" href="#copyright" title="Direct link to heading">​</a></h2><p>Copyright ⓒ 2012 Seth Robertson</p><p>Creative Commons Attribution-ShareAlike 3.0 Generic (CC BY-SA 3.0) <a href="http://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">http://creativecommons.org/licenses/by-sa/3.0/</a></p><p>OR</p><p>GNU Free Documentation v1.3 with no Invariant, Front, or Back Cover texts. <a href="http://www.gnu.org/licenses/fdl.html" target="_blank" rel="noopener noreferrer">http://www.gnu.org/licenses/fdl.html</a></p><p>I would appreciate changes being sent back to me, being notified if this is used or highlighted in some special way, and links being maintained back to the <a href="http://sethrobertson.github.com/GitBestPractices/" target="_blank" rel="noopener noreferrer">authoritative source</a>. Thanks.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="thanks">Thanks<a class="hash-link" href="#thanks" title="Direct link to heading">​</a></h2><p>Thanks to the experts on #git, and my co-workers, for review, feedback, and ideas.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="comments">Comments<a class="hash-link" href="#comments" title="Direct link to heading">​</a></h2><p>Comments and improvements welcome.</p><p><a href="https://github.com/SethRobertson/GitBestPractices/issues" target="_blank" rel="noopener noreferrer">Use the github issue tracker</a> or discuss with SethRobertson (and others) on <a href="irc://irc.freenode.net/git" target="_blank" rel="noopener noreferrer">#git</a></p><p><a href="http://sethrobertson.github.io/" target="_blank" rel="noopener noreferrer">Other technical projects</a></p>]]></content>
        <author>
            <name>Seth Robertson</name>
        </author>
        <category label="git" term="git"/>
        <category label="best practicies" term="best practicies"/>
    </entry>
</feed>