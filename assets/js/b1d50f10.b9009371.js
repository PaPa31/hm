"use strict";(self.webpackChunkhuman_and_machine=self.webpackChunkhuman_and_machine||[]).push([[27414],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return m}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),p=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=p(e.components);return o.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,h=u["".concat(c,".").concat(m)]||u[m]||d[m]||r;return n?o.createElement(h,i(i({ref:t},l),{},{components:n})):o.createElement(h,i({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},82543:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return l},default:function(){return u}});var o=n(87462),a=n(63366),r=(n(67294),n(3905)),i=["components"],s={id:"7-30-using-context-api",title:"7.30 Using Context API",date:new Date("2021-04-09T00:20:10.000Z")},c=void 0,p={unversionedId:"react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-30-using-context-api",id:"react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-30-using-context-api",isDocsHomePage:!1,title:"7.30 Using Context API",description:"From A -> D",source:"@site/courses/react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-30-using-context-api.md",sourceDirName:"react-complete-guide/07-diving-deeper-into-components-and-react-internals",slug:"/react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-30-using-context-api",permalink:"/hm/courses/react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-30-using-context-api",editUrl:"https://github.com/papa31/hm/edit/documentation/courses/react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-30-using-context-api.md",tags:[],version:"current",lastUpdatedBy:"PaPa31",lastUpdatedAt:1631602446,formattedLastUpdatedAt:"9/14/2021",frontMatter:{id:"7-30-using-context-api",title:"7.30 Using Context API",date:"2021-04-09T00:20:10.000Z"},sidebar:"Docs",previous:{title:"7.29 Understanding Prop Chain Problems",permalink:"/hm/courses/react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-29-understanding-prop-chain-problems"},next:{title:"7.31 contextType and useContext",permalink:"/hm/courses/react-complete-guide/07-diving-deeper-into-components-and-react-internals/7-31-context-type-and-use-context"}},l=[{value:"From A -&gt; D",id:"from-a---d",children:[]},{value:"new <code>auth-context.js</code>",id:"new-auth-contextjs",children:[]},{value:"App.js",id:"appjs",children:[]},{value:"Persons.js",id:"personsjs",children:[]},{value:"Person.js",id:"personjs",children:[]},{value:"Cockpit.js",id:"cockpitjs",children:[]}],d={toc:l};function u(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"from-a---d"},"From A -> D"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Context")," was introduced by React and it helps us handle cases like this, where you need certain data, certain state in multiple components and you don't want to pass that state across multiple layers of components just to get it from component A at the top to component D at the very bottom when the components B, C in between don't really care about it  and that's exactly the use case here."),(0,r.kt)("p",null,"We want to skip the ",(0,r.kt)("inlineCode",{parentName:"p"},"Persons")," component and with the React context feature, we can do that. How does it work then?"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The Context is a JavaScript object that can be passed between React components without using props, behind the scenes.\nTechnically, it doesn't have to be an object. You could also have an array, a string, a number etc. as a context value!"))),(0,r.kt)("h2",{id:"new-auth-contextjs"},"new ",(0,r.kt)("inlineCode",{parentName:"h2"},"auth-context.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/context/auth-context.js" {}',title:'"src/context/auth-context.js"',"{}":!0},'import React from "react";\n\nconst authContext = React.createContext({\n  authenticated: false,\n  login: () => {},\n});\n\nexport default authContext;\n')),(0,r.kt)("p",null,"For example, here I'll set ",(0,r.kt)("em",{parentName:"p"},"authenticated")," to false and I'll also add a ",(0,r.kt)("em",{parentName:"p"},"login")," method here. However this method will not do anything, it's an empty anonymous function and I'm adding this here because if I initialize my default value with everything I want to be able to access on this ",(0,r.kt)("inlineCode",{parentName:"p"},"context")," from different components in my application, then I actually get better ",(0,r.kt)("strong",{parentName:"p"},"auto-completion")," from the IDE and that's the only reason."),(0,r.kt)("h2",{id:"appjs"},"App.js"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="App.js" {2,15-20,30}',title:'"App.js"',"{2,15-20,30}":!0},'...\nimport AuthContext from "../context/auth-context";\n\n...\n\n    return (\n      <Aux>\n        <button\n          onClick={() => {\n            this.setState({ showCockpit: !this.state.showCockpit });\n          }}\n        >\n          Remove Cockpit\n        </button>\n        <AuthContext.Provider\n          value={{\n            authenticated: this.state.authenticated,\n            login: this.loginHandler,\n          }}\n        >\n          {this.state.showCockpit ? (\n            <Cockpit\n              title={this.props.appTitle}\n              personsLength={this.state.persons.length}\n              showPersons={this.state.showPersons}\n              clicked={this.togglePersonsHandler}\n            />\n          ) : null}\n          {persons}\n        </AuthContext.Provider>\n      </Aux>\n    );\n  }\n}\n\nexport default withClass(App, classes.App);\n')),(0,r.kt)("h2",{id:"personsjs"},"Persons.js"),(0,r.kt)("p",null,"Not needed! Thanks to the ",(0,r.kt)("inlineCode",{parentName:"p"},"context"),"."),(0,r.kt)("h2",{id:"personjs"},"Person.js"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Person.js" {2,10-15}',title:'"Person.js"',"{2,10-15}":!0},'...\nimport AuthContext from "../../../context/auth-context";\n\n...\n\n  render() {\n    console.log("[Person.js] rendering...");\n    return (\n      <Fragment>\n        <AuthContext.Consumer>\n          {(context) =>\n            context.authenticated ? <p>Authenticated!</p> : <p>Please log in</p>\n          }\n        </AuthContext.Consumer>\n        <p key="i1" onClick={this.props.click}>\n          I\'m {this.props.name} and I am {this.props.age} years old!\n        </p>\n        <p key="i2">{this.props.children}</p>\n        <input\n          key="i3"\n          ref={this.inputElementRef}\n          type="text"\n          onChange={this.props.changed}\n          value={this.props.name}\n        />\n      </Fragment>\n')),(0,r.kt)("h2",{id:"cockpitjs"},"Cockpit.js"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Cockpit.js" {2,13-15}',title:'"Cockpit.js"',"{2,13-15}":!0},'...\nimport AuthContext from "../../context/auth-context";\n\n...\n\n  return (\n    <div className={classes.Cockpit}>\n      <h1>{props.title}</h1>\n      <p className={assignedClasses.join(" ")}>This is really working!</p>\n      <button ref={toggleBtnRef} className={btnClass} onClick={props.clicked}>\n        Toggle Persons\n      </button>\n      <AuthContext.Consumer>\n        {(context) => <button onClick={context.login}>Log in</button>}\n      </AuthContext.Consumer>\n    </div>\n  );\n};\n\nexport default React.memo(cockpit);\n')),(0,r.kt)("p",null,"This is especially useful if you have very long chains of data you're passing around and if you don't want to pass data from component to component, if you don't need it in these in-between components, then ",(0,r.kt)("inlineCode",{parentName:"p"},"context")," is a great way of bypassing components and directly passing data from A to D."))}u.isMDXComponent=!0}}]);