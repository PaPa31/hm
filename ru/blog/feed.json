{
    "version": "https://jsonfeed.org/version/1",
    "title": "hm Blog",
    "home_page_url": "https://papa31.github.io/hm/ru/blog",
    "description": "hm Blog",
    "items": [
        {
            "id": "/2021/09/19/nvs-one-node-version-per-terminal-in-windows",
            "content_html": "<p>I tried to configure <a href=\"https://github.com/coreybutler/nvm-windows\" target=\"_blank\" rel=\"noopener noreferrer\">nvm-windows</a> to automatically change the <code>node</code> version based on the folder with a specific <code>.nvmrc</code> file. But unsuccessfully. When I used to run <code>nvm use</code> the node version changed globally.</p><p>I have read about <a href=\"https://github.com/jasongin/nvs#automatic-switching-per-directory\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"external\">nvs: Automatic Switching Per Directory (github.com)</a> in <code>nvs readme file</code> and decided to give it a try.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"remove-nvm-windows\">Remove nvm-windows<a class=\"hash-link\" href=\"#remove-nvm-windows\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>Go to <code>C:\\Users\\[username]\\AppData\\Roaming\\nvm</code> and run <code>unins000.exe</code> by double clicking it.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"install-nvs\">Install nvs<a class=\"hash-link\" href=\"#install-nvs\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>I downloaded the <a href=\"https://github.com/jasongin/nvs/releases/tag/v1.6.0\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"external\">nvs-1.6.0.msi</a> version of <code>nvs</code> and then ran this file by double clicking on it.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"adding-node-versions\">Adding node versions<a class=\"hash-link\" href=\"#adding-node-versions\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>To add a specific <code>node</code> version, run <code>nvs add</code> with the version number:</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">❯ nvs add 12.21.0</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">Adding: node/12.21.0/x64</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">Extracting  [###########################] 100%</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">PATH += $env:LOCALAPPDATA\\nvs\\node\\12.21.0\\x64</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"setting-the-default-node-version\">Setting the default node version<a class=\"hash-link\" href=\"#setting-the-default-node-version\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>Run <code>nvs link</code> with the version number:</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">nvs link 12.21.0</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"setup-git-bash\">Setup Git-Bash<a class=\"hash-link\" href=\"#setup-git-bash\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><div class=\"admonition admonition-note alert alert--secondary\"><div class=\"admonition-heading\"><h5><span class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"16\" viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path></svg></span>note</h5></div><div class=\"admonition-content\"><p><code>Git-Bash</code> is my fallback. It allows the use Unix command sintax.</p></div></div><p>Add to <code>C:\\Users\\[username]\\.bash_profile</code> these two lines:</p><div class=\"codeBlockContainer_I0IT language-bash theme-code-block\"><div style=\"color:#393A34;background-color:#f6f8fa\" class=\"codeBlockTitle_BvAR\">.bash_profile</div><div class=\"codeBlockContent_wNvx bash\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token keyword\" style=\"color:#00009f\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"> -f ~/.bashrc </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:#00009f\">then</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">.</span><span class=\"token plain\"> ~/.bashrc</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:#00009f\">fi</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>Add to <code>C:\\Users\\[username]\\.bashrc</code> these lines (if this file is missing, create it in <code>notepad</code>):</p><div class=\"codeBlockContainer_I0IT language-bash theme-code-block\"><div style=\"color:#393A34;background-color:#f6f8fa\" class=\"codeBlockTitle_BvAR\">.bashrc</div><div class=\"codeBlockContent_wNvx bash\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token plain\"> </span><span class=\"token function-name function\" style=\"color:#d73a49\">setupNvs</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token builtin class-name\">export</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:#36acaa\">NVS_HOME</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token string variable\" style=\"color:#36acaa\">$LOCALAPPDATA</span><span class=\"token string entity\" style=\"color:#36acaa\">\\\\</span><span class=\"token string\" style=\"color:#e3116c\">nvs\"</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"> -s </span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token string variable\" style=\"color:#36acaa\">$NVS_HOME</span><span class=\"token string\" style=\"color:#e3116c\">/nvs.sh\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">&amp;&amp;</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">source</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token string variable\" style=\"color:#36acaa\">$NVS_HOME</span><span class=\"token string\" style=\"color:#e3116c\">/nvs.sh\"</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">&gt;&gt;</span><span class=\"token plain\"> /dev/null</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token builtin class-name\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">setupNvs</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><div class=\"admonition admonition-caution alert alert--warning\"><div class=\"admonition-heading\"><h5><span class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></span>caution</h5></div><div class=\"admonition-content\"><p>Look at th line <code>export NVS_HOME=\"$LOCALAPPDATA\\\\nvs\";</code> this is where <code>windows env</code> (%LOCALAPPDATA%\\nvs) is converted to <code>unix env</code>. In case of error see for example: <a href=\"https://superuser.com/questions/1284276/how-to-use-localappdata-with-git-bash-in-windows\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"external\">superuser.com: How To Use Localappdata With Git Bash In Windows</a></p></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"nvs-basic-usage\">nvs Basic Usage<a class=\"hash-link\" href=\"#nvs-basic-usage\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>Open <code>PowerShell</code> or <code>Git-Bash</code> terminal.</p><p>Let's create two project folders with two different <code>.nvmrc</code> files using these commands:</p><div class=\"tabs-container\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LplD tabs__item--active\">PowerShell</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LplD\">Git-Bash</li></ul><div class=\"margin-vert--md\"><div role=\"tabpanel\"><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">cd ~</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">mkdir one</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">cd one</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">\"10.24.0\" | Out-File .nvmrc     # create .nvmrc file with node version</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[string]::Join( \"`n\", (gc .nvmrc)) | sc .nvmrc  # convert the line above from Windows to Unix</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">cd ~</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">mkdir two</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">cd two</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">\"14.16.0\" | Out-File .nvmrc     # create .nvmrc file with node version</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[string]::Join( \"`n\", (gc .nvmrc)) | sc .nvmrc  # convert the line above from Windows to Unix</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div></div><div role=\"tabpanel\" hidden=\"\"><div class=\"codeBlockContainer_I0IT language-bash theme-code-block\"><div class=\"codeBlockContent_wNvx bash\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> ~</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> one</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> one</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"10.24.0\"</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"> .nvmrc     </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># create .nvmrc file with node version</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> ~</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> two</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> two</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"14.16.0\"</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"> .nvmrc     </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># create .nvmrc file with node version</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div></div></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"manual-switching-using-nvmrc\">Manual switching using <code>.nvmrc</code><a class=\"hash-link\" href=\"#manual-switching-using-nvmrc\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>Let's go to the project <code>one</code> and run <code>nvs auto</code> (in <code>PowerShell</code> or <code>Git-Bash</code>):</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">❯ nvs auto</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">PATH -= $env:LOCALAPPDATA\\nvs\\default</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">PATH += $env:LOCALAPPDATA\\nvs\\node\\10.24.0\\x64</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><div class=\"admonition admonition-note alert alert--secondary\"><div class=\"admonition-heading\"><h5><span class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"16\" viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path></svg></span>note</h5></div><div class=\"admonition-content\"><p>If everything is ok, <code>nvs</code> will automatically download the correct <code>node</code> version and activate it.</p></div></div><div class=\"admonition admonition-caution alert alert--warning\"><div class=\"admonition-heading\"><h5><span class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></span>caution</h5></div><div class=\"admonition-content\"><p>In case of an error, you may need to edit or replace this line:</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div style=\"color:#393A34;background-color:#f6f8fa\" class=\"codeBlockTitle_BvAR\">PowerShell</div><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[string]::Join( \"`n\", (gc .nvmrc)) | sc .nvmrc</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>source: <a href=\"https://stackoverflow.com/questions/5102115/unix-format-files-with-powershell\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"external\">stackoverflow.com: Unix Format Files With Powershell</a></p></div></div><p>Then open second terminal, go to the project <code>two</code> folder and again run <code>nvs auto</code>:</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">❯ nvs auto</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">PATH -= $env:LOCALAPPDATA\\nvs\\default</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">PATH += $env:LOCALAPPDATA\\nvs\\node\\14.16.0\\x64</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>Again, <code>nvs</code> install the required node version and then change the <code>environment variable</code> to use it.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"check-switching-ability\">Check Switching Ability<a class=\"hash-link\" href=\"#check-switching-ability\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>Check the version of node in the folder <code>one</code>  (in first terminal):</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">❯ node -v</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">v10.24.0</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>Check the node version in the folder <code>two</code> (in second terminal):</p><div class=\"codeBlockContainer_I0IT theme-code-block\"><div class=\"codeBlockContent_wNvx\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">❯ node -v</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">14.26.0</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><div class=\"admonition admonition-tip alert alert--success\"><div class=\"admonition-heading\"><h5><span class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"16\" viewBox=\"0 0 12 16\"><path fill-rule=\"evenodd\" d=\"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z\"></path></svg></span>tip</h5></div><div class=\"admonition-content\"><p>Hence, <code>nvs</code> changes the node versions locally, one node version per terminal.</p></div></div><p>Which was required to check.</p>",
            "url": "https://papa31.github.io/hm/ru/blog/2021/09/19/nvs-one-node-version-per-terminal-in-windows",
            "title": "nvs: One Node Version Per Terminal in Windows",
            "summary": "I tried to configure nvm-windows to automatically change the node version based on the folder with a specific .nvmrc file. But unsuccessfully. When I used to run nvm use the node version changed globally.",
            "date_modified": "2021-09-19T13:47:35.000Z",
            "author": {
                "name": "papa31",
                "url": "https://github.com/papa31"
            },
            "tags": [
                "nvs",
                "node"
            ]
        },
        {
            "id": "/2020/12/21/docusaurus-test-and-build",
            "content_html": "<p>To test your Docusaurus pages in a browser, you need to do <a href=\"#\">this setup</a> and run: <code>npm run start</code>. To see your pages on your website, you need to <a href=\"#\">configure remote</a> and execute: <code>git push</code>.</p><p>But what if the local test succeeds but the remote build fails. 🤔</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"initial-setup\">Initial Setup<a class=\"hash-link\" href=\"#initial-setup\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>Initially I configured Docusaurus-v2 to:</p><ol><li>start the development server <code>npm run start</code> and</li><li>upload my content to GitHub using <code>git push</code>.</li></ol><p>The simplified test pages were fine. But when rendering many markdown files with links and images, deployment fails.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"broken-links\">Broken Links<a class=\"hash-link\" href=\"#broken-links\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>This is the most common error. Best of all, you won't catch this error when you test pages through the development server with <code>npm run start</code>.</p><p>::: note Broken Links You can only catch <code>broken links</code> when you <strong>build</strong>. :::</p><p>I immediately got a broken link error when I uploaded quite a few raw pages on GitHub. But finding broken links on a remote server is not easy. Not enough information. You have to make <strong>frequent commits</strong>. And often without success.</p><p>To fix the broken links' problem <code>without extra commits</code>, you need to do a local build.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"local-build\">Local Build<a class=\"hash-link\" href=\"#local-build\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>To make build on your local machine and run server is not too hard:</p><div class=\"tabs-container\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LplD tabs__item--active\">npm</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LplD\">Yarn</li></ul><div class=\"margin-vert--md\"><div role=\"tabpanel\"><div class=\"codeBlockContainer_I0IT language-bash theme-code-block\"><div class=\"codeBlockContent_wNvx bash\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">npm</span><span class=\"token plain\"> run build</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">npm</span><span class=\"token plain\"> run serve</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div></div><div role=\"tabpanel\" hidden=\"\"><div class=\"codeBlockContainer_I0IT language-bash theme-code-block\"><div class=\"codeBlockContent_wNvx bash\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">yarn</span><span class=\"token plain\"> run build</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">yarn</span><span class=\"token plain\"> run serve</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div></div></div></div><p>But there are pitfalls — <code>unstable BaseUrl</code>. In local build — ... In remote build — ...</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"unstable-baseurl\">Unstable BaseUrl<a class=\"hash-link\" href=\"#unstable-baseurl\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>This is common issue for <strong>node world</strong> projects: for local build you need to use the one data, for remote build the other data.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"productiondevelopment-issue\">production/development issue<a class=\"hash-link\" href=\"#productiondevelopment-issue\" title=\"Прямая ссылка на этот заголовок\">​</a></h3><p>In first case I need:</p><p><code>baseUrl = '/hm/'</code></p><p>in other case:</p><p><code>baseUrl = '/'</code></p><p>One of the typical ways to resolve the problem is to use environment variables — <code>env</code>.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"env\">env<a class=\"hash-link\" href=\"#env\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>The Docusaurus documentation has a section on <a href=\"https://v2.docusaurus.io/docs/deployment/#environment-settings\" target=\"_blank\" rel=\"noopener noreferrer\">Environment settings</a>. But there is not enough information about utilities such as <code>cross-env</code>. This is a utility that Docusaurus itself uses.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"cross-env\">cross-env<a class=\"hash-link\" href=\"#cross-env\" title=\"Прямая ссылка на этот заголовок\">​</a></h3><p>Run scripts that set and use environment variables across platforms</p><p>Install:</p><div class=\"tabs-container\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LplD tabs__item--active\">npm</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LplD\">Yarn</li></ul><div class=\"margin-vert--md\"><div role=\"tabpanel\"><div class=\"codeBlockContainer_I0IT language-bash theme-code-block\"><div class=\"codeBlockContent_wNvx bash\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">npm</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">install</span><span class=\"token plain\"> --save-dev cross-env</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div></div><div role=\"tabpanel\" hidden=\"\"><div class=\"codeBlockContainer_I0IT language-bash theme-code-block\"><div class=\"codeBlockContent_wNvx bash\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">yarn</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">add</span><span class=\"token plain\"> --dev cross-env</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div></div></div></div><p>Three lines:</p><div class=\"codeBlockContainer_I0IT language-json theme-code-block\"><div style=\"color:#393A34;background-color:#f6f8fa\" class=\"codeBlockTitle_BvAR\">package.json</div><div class=\"codeBlockContent_wNvx json\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"name\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"notes\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"version\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"0.0.0\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"private\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:#36acaa\">true</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line docusaurus-highlight-code-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"homepage\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"/hm\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"scripts\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"docusaurus\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"docusaurus\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line docusaurus-highlight-code-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"start\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"cross-env BASE_URL='/hm/' docusaurus start\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"build\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"docusaurus build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"swizzle\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"docusaurus swizzle\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line docusaurus-highlight-code-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"deploy\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"cross-env BASE_URL='/hm/' GIT_USER=git USE_SSH=true docusaurus deploy\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"serve\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"docusaurus serve\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"clear\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"docusaurus clear\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  ...</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>Two lines:</p><div class=\"codeBlockContainer_I0IT language-js theme-code-block\"><div style=\"color:#393A34;background-color:#f6f8fa\" class=\"codeBlockTitle_BvAR\">docusaurus.config.js</div><div class=\"codeBlockContent_wNvx js\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line docusaurus-highlight-code-line\" style=\"color:#393A34\"><span class=\"token keyword\" style=\"color:#00009f\">const</span><span class=\"token plain\"> baseUrl </span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token constant\" style=\"color:#36acaa\">BASE_URL</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">||</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'/'</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">module</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">exports</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token literal-property property\" style=\"color:#36acaa\">title</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'hm'</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token literal-property property\" style=\"color:#36acaa\">tagline</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'Human@Machine'</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token literal-property property\" style=\"color:#36acaa\">url</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'https://papa31.github.io'</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line docusaurus-highlight-code-line\" style=\"color:#393A34\"><span class=\"token plain\">  baseUrl</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token literal-property property\" style=\"color:#36acaa\">onBrokenLinks</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'throw'</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token spread operator\" style=\"color:#393A34\">...</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><div class=\"admonition admonition-warning alert alert--danger\"><div class=\"admonition-heading\"><h5><span class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"16\" viewBox=\"0 0 12 16\"><path fill-rule=\"evenodd\" d=\"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z\"></path></svg></span>warning</h5></div><div class=\"admonition-content\"><p>If you get the error:</p><div class=\"codeBlockContainer_I0IT language-sh theme-code-block\"><div class=\"codeBlockContent_wNvx sh\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">'cross-env' is not recognized</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>You can run these two commands in your <code>bash</code> (Linux) or <code>Git Bash</code> (Windows):</p><div class=\"codeBlockContainer_I0IT language-sh theme-code-block\"><div class=\"codeBlockContent_wNvx sh\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">rm -rf node_modules package-lock.json</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">npm i</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>Or you can try <a href=\"https://stackoverflow.com/questions/45034581/laravel-5-4-cross-env-is-not-recognized-as-an-internal-or-external-command\" target=\"_blank\" rel=\"noopener noreferrer\">install cross-env globally</a></p></div></div><p>But how do I add an environment variable remotely?</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"set-remote-env\">Set Remote <code>env</code><a class=\"hash-link\" href=\"#set-remote-env\" title=\"Прямая ссылка на этот заголовок\">​</a></h3><p>You need use workflow file. Edit one line:</p><div class=\"codeBlockContainer_I0IT language-yml theme-code-block\"><div style=\"color:#393A34;background-color:#f6f8fa\" class=\"codeBlockTitle_BvAR\">/.github/workflows/documentation.yml</div><div class=\"codeBlockContent_wNvx yml\"><pre tabindex=\"0\" class=\"prism-code language-yml codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:#393A34\">...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Release to GitHub Pages</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">env</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">USE_SSH</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">GIT_USER</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> git</span><br></span><span class=\"token-line docusaurus-highlight-code-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">BASE_URL</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'/hm/'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">run</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">|</span><span class=\"token scalar string\" style=\"color:#e3116c\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          git config --global user.email \"actions@gihub.com\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          git config --global user.name \"gh-actions\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          if [ -e yarn.lock ]; then</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          yarn install --frozen-lockfile</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          elif [ -e package-lock.json ]; then</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          npm ci</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          else</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          npm i</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          fi</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          npx docusaurus deploy</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"todo-insert-whole-files-as-in-docusaurus-site-docs\">todo: insert whole files as in Docusaurus site docs(?)<a class=\"hash-link\" href=\"#todo-insert-whole-files-as-in-docusaurus-site-docs\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><h2 class=\"anchor anchorWithHideOnScrollNavbar_R0VQ\" id=\"windows\">Windows<a class=\"hash-link\" href=\"#windows\" title=\"Прямая ссылка на этот заголовок\">​</a></h2><p>If error:</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div style=\"color:#393A34;background-color:#f6f8fa\" class=\"codeBlockTitle_BvAR\">PowerShell</div><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">'cross-env' is not recognized as an internal or external command,</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">operable program or batch file.</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>Run this:</p><div class=\"codeBlockContainer_I0IT language-powershell theme-code-block\"><div class=\"codeBlockContent_wNvx powershell\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_jd64 thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_mRuA\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">rm -rf node_modules &amp;&amp; npm install</span><br></span></code></pre><button type=\"button\" aria-label=\"Скопировать в буфер обмена\" class=\"copyButton_wuS7 clean-btn\">Скопировать</button></div></div><p>Doesn't help? Read other tips from <a href=\"https://stackoverflow.com/questions/43685777/laravel-mix-sh-1-cross-env-not-found-error\" target=\"_blank\" rel=\"noopener noreferrer\">stackoverflow</a>.</p>",
            "url": "https://papa31.github.io/hm/ru/blog/2020/12/21/docusaurus-test-and-build",
            "title": "Docusaurus: Test & Build",
            "summary": "Setup all 3 ways Docusaurus start",
            "date_modified": "2020-12-21T00:00:00.000Z",
            "author": {
                "name": "papa31",
                "url": "https://github.com/papa31"
            },
            "tags": [
                "docusaurus",
                "settings"
            ]
        }
    ]
}